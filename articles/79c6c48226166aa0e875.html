<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="icon shortcut" href="http://localhost:8000/favicon.png"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&amp;display=swap"/><script>window.twttr=(function(f,b,g){var e,c=f.getElementsByTagName(b)[0],a=window.twttr||{};if(f.getElementById(g)){return a}e=f.createElement(b);e.id=g;e.src="https://platform.twitter.com/widgets.js";c.parentNode.insertBefore(e,c);a._e=[];a.ready=function(d){a._e.push(d)};return a}(document,"script","twitter-wjs"));</script><title>量子コンピュータで2人の“Covert”⁉️ガチャのプレビュー</title><meta name="next-head-count" content="6"/><link rel="preload" href="../_next/static/css/7c32efeb1cbe6c8a3c4c.css" as="style"/><link rel="stylesheet" href="../_next/static/css/7c32efeb1cbe6c8a3c4c.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="../_next/static/chunks/main-1b66b3d4e760501de7fc.js" as="script"/><link rel="preload" href="../_next/static/chunks/webpack-c645516b0e3a28df7079.js" as="script"/><link rel="preload" href="../_next/static/chunks/framework.c81d3c1a1154ef2f0a4c.js" as="script"/><link rel="preload" href="../_next/static/chunks/commons.1d17d07e0ebe7c16f5b5.js" as="script"/><link rel="preload" href="../_next/static/chunks/pages/_app-1a997dad60d5b227663b.js" as="script"/><link rel="preload" href="../_next/static/chunks/7ea9eb72fe501167df0c2d045178d60d280aa121.549ac0d8bdc0604fb58b.js" as="script"/><link rel="preload" href="../_next/static/chunks/fac796102cd92fcc9d69418a1184140a0c3193c8.fee5f3964bb5b2c71f69.js" as="script"/><link rel="preload" href="../_next/static/chunks/pages/articles/[slug]-ed1dc9d6a24fac085414.js" as="script"/></head><body><div id="__next"><div class="main-container"><div class="main-sidebar"><aside class="sidebar"><header class="sidebar-header"><a class="sidebar-logo-link" href="http://localhost:8000/"><img src="../logo.svg" alt="Zenn Editor" width="160" height="19"/></a><a href="https://github.com/zenn-dev/zenn-editor" class="sidebar-github-link"><img src="../github.svg" alt="GitHub" width="22" height="22"/></a></header><div class="sidebar-collections"><details class="sidebar-collection" open=""><summary class="sidebar-collection__title">articles</summary><ul class="sidebar-collection__ul"><li class="sidebar-collection__li"><a class="sidebar-nav-item " title="/articles/268447da9fb103.md" href="268447da9fb103.html">🏹 <span class="draft">下書き</span>Swift Bow Archの入門</a></li><li class="sidebar-collection__li"><a class="sidebar-nav-item " title="/articles/54134d8df9f9b5385fc3.md" href="54134d8df9f9b5385fc3.html">📄 Zennの記事をGitHub Pagesで無理やり表示する</a></li><li class="sidebar-collection__li"><a class="sidebar-nav-item active" title="/articles/79c6c48226166aa0e875.md" href="79c6c48226166aa0e875.html">🙈 量子コンピュータで2人の“Covert”⁉️ガチャ</a></li><li class="sidebar-collection__li"><a class="sidebar-nav-item " title="/articles/scala-play-new-relic.md" href="scala-play-new-relic.html">📈 Scala + Play on HerokuなWebアプリにNew Relicを導入</a></li></ul></details><details class="sidebar-collection" open=""><summary class="sidebar-collection__title">books</summary><ul class="sidebar-collection__ul"><li class="sidebar-collection__li"><a class="sidebar-nav-item " title="undefined.md" href="http://localhost:8000/">✨ 最初の本を作成しましょう</a></li></ul></details></div><a href="https://zenn.dev/dashboard/uploader" class="sidebar-external-link" target="_blank" rel="noopener noreferrer"><img src="https://twemoji.maxcdn.com/2/svg/\1f4f7.svg" width="16" height="16"/>画像のアップロード</a><a href="https://zenn.dev/zenn/articles/markdown-guide" class="sidebar-external-link" target="_blank" rel="noopener noreferrer"><img src="https://twemoji.maxcdn.com/2/svg/\1f58b.svg" width="16" height="16"/>マークダウン・ガイド</a><a href="https://zenn.dev/zenn/articles/zenn-cli-guide" class="sidebar-external-link" target="_blank" rel="noopener noreferrer"><img src="https://twemoji.maxcdn.com/2/svg/\1f4bb.svg" width="16" height="16"/>CLIコマンド・ガイド</a></aside><button class="main-sidebar__minimize"><img src="../chevron.svg" alt="" width="22" height="22"/></button></div><main class="main-content"><article><div><header class="content-header"><div class="content-wrapper"><h1 class="content-header__title">量子コンピュータで2人の“Covert”⁉️ガチャ</h1><div class="content-header__row"><span class="content-header__row-title">slug</span><span class="content-header__row-result">79c6c48226166aa0e875</span></div><div class="content-header__row"><span class="content-header__row-title">emoji</span><span class="content-header__row-result"><span style="font-size:20px">🙈</span></span></div><div class="content-header__row"><span class="content-header__row-title">topics</span><span class="content-header__row-result"><span class="content-header__topic">量子コンピュータ</span><span class="content-header__topic">暗号</span><span class="content-header__topic">セキュリティ</span></span></div><div class="content-header__row"><span class="content-header__row-title">published</span><span class="content-header__row-result">✅（公開）</span></div><div class="content-header__row"><span class="content-header__row-title">type</span><span class="content-header__row-result">tech<!-- -->（技術記事）</span></div><a href="https://zenn.dev/zenn/articles/zenn-cli-guide" class="content-header__link" rel="noopener noreferrer" target="_blank">記事の作成方法 →</a></div></header><div class="content-wrapper"><div style="margin:40px 0"><div class="znc"><h1 id="%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><a class="header-anchor-link" href="79c6c48226166aa0e875.html#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB" rel="nofollow"></a> はじめに</h1>
<p>“<em>Covert Lottery</em>” とは論文<a href="https://doi.org/10.1007/978-3-030-69255-1_17" rel="nofollow">Card-Based Covert Lottery</a><sup class="footnote-ref"><a href="79c6c48226166aa0e875.html#fn1" id="fnref1">[1]</a></sup>で導入された用語である。これはプレイヤーの秘密の希望を入力し、</p>
<ol>
<li>それらが衝突しないのであれば希望通りにし</li>
<li>そうでないなら、ランダムな結果を出力する</li>
</ol>
<p>というプロトコルである。たとえば将棋などで2人のプレイヤーが先手・後手を決める場合に使うことができる。この2人のプレイヤーはそれぞれ先手・後手のどちらにしたいという希望があるものとするが、一方でこの希望を相手に明らかにしてしまうと、戦略が流出する可能性がある。したがってこのプレイヤー2人がCovert Lotteryを行えば、各々の希望が先手・後手の希望が噛み合った（衝突していない）時にはそれを出力し、一方で2人ともが先手・後手のいずれかを希望した場合はランダムに決定する。このようにすれば2人のプレイヤーは自分の入力した希望通りとなったのか、それとも衝突してランダムに決定されたのか知ることができないため、戦略が流出しない。<br>
元論文ではこのようなプロトコルをカードベース暗号<sup class="footnote-ref"><a href="79c6c48226166aa0e875.html#fn2" id="fnref2">[2]</a></sup>で構成しているが、筆者が軽く読んだ限りでは量子コイントスでも達成できそうであったため、この記事では量子コイントスでこれをどのように達成するかについて議論する。<br>
この記事にもし何かの誤りがあったとしてもこの記事の筆者の落ち度であるので、コメントなどで気軽に教えてほしい。</p>
<h1 id="2%E4%BA%BA%E3%81%AEcovert-lottery%E3%82%92%E8%A1%8C%E3%81%86%E9%96%A2%E6%95%B0"><a class="header-anchor-link" href="79c6c48226166aa0e875.html#2%E4%BA%BA%E3%81%AEcovert-lottery%E3%82%92%E8%A1%8C%E3%81%86%E9%96%A2%E6%95%B0" rel="nofollow"></a> 2人のCovert Lotteryを行う関数</h1>
<p>この節では元論文で説明されている2人のCovert Lottery（先手・後手を秘密に決定する）についてまず説明する。いま2人のプレイヤーとしてアリスとボブがいるものとする。アリスの入力を<embed-katex><eq class="zenn-katex">a</eq></embed-katex>として、アリスが先手を希望するならならば<embed-katex><eq class="zenn-katex">a = 1</eq></embed-katex>となり、後手を希望するなら<embed-katex><eq class="zenn-katex">a = 0</eq></embed-katex>となる。ボブについても同様に先手を希望するなら<embed-katex><eq class="zenn-katex">b = 1</eq></embed-katex>であり、後手を希望するなら<embed-katex><eq class="zenn-katex">b = 0</eq></embed-katex>とする。つまり先手なら<embed-katex><eq class="zenn-katex">1</eq></embed-katex>、後手なら<embed-katex><eq class="zenn-katex">0</eq></embed-katex>というエンコードになっている。<br>
そして<embed-katex><eq class="zenn-katex">\mathcal{F}</eq></embed-katex>を「アリスの先手・後手を出力する関数」であるとすると、次のようになる。</p>
<section class="zenn-katex"><eqn><embed-katex display-mode="1">
\mathcal{F}(a, b) := \left\{
  \begin{array}{lr}
    a &amp; \text{if}\; a \ne b \\
    i \xleftarrow{\text{rnd}} \{0, 1\} &amp; \text{if}\; a = b
  \end{array}
\right.
</embed-katex></eqn></section></math>
<p>ただし<embed-katex><eq class="zenn-katex">\xleftarrow{\text{rnd}} \{0, 1\}</eq></embed-katex>は<embed-katex><eq class="zenn-katex">\{0, 1\}</eq></embed-katex>からランダムに片方を選ぶことを意味している<sup class="footnote-ref"><a href="79c6c48226166aa0e875.html#fn3" id="fnref3">[3]</a></sup>。</p>
<p>議論の前に、この後すぐに使うので先に表記として<embed-katex><eq class="zenn-katex">\overline{x}</eq></embed-katex>を導入しておく。これは<embed-katex><eq class="zenn-katex">x \in \{0,1\}</eq></embed-katex>にNOT演算を適用した結果を意味している。たとえば<embed-katex><eq class="zenn-katex">x = 0</eq></embed-katex>であれば<embed-katex><eq class="zenn-katex">\overline{x} = 1</eq></embed-katex>となる。</p>
<p>さて、この関数<embed-katex><eq class="zenn-katex">\mathcal{F}</eq></embed-katex>について考える。今もし<embed-katex><eq class="zenn-katex">a \ne b</eq></embed-katex>であったとしたら、<embed-katex><eq class="zenn-katex">a, b \in \{0, 1\}</eq></embed-katex>であるから、<embed-katex><eq class="zenn-katex">a = \overline{b}</eq></embed-katex>となる。逆に<embed-katex><eq class="zenn-katex">a = b</eq></embed-katex>であれば<embed-katex><eq class="zenn-katex">\{a, \overline{b}\} = \{0, 1\}</eq></embed-katex>である。この2つをまとめると<embed-katex><eq class="zenn-katex">\mathcal{F}</eq></embed-katex>を次のように書き直せる。</p>
<section class="zenn-katex"><eqn><embed-katex display-mode="1">
\mathcal{F}(a, b) = \left\{
  \begin{array}{lr}
    a\, (= \overline{b}) &amp; \text{if}\; a \ne b \\
    i \xleftarrow{\text{rnd}} \{a, \overline{b}\} &amp; \text{if}\; a = b
  \end{array}
\right.
</embed-katex></eqn></section></math>
<p>ここで<embed-katex><eq class="zenn-katex">a \ne b</eq></embed-katex>のケースは実は<embed-katex><eq class="zenn-katex">a = \overline{b}</eq></embed-katex>なため、<embed-katex><eq class="zenn-katex">\{a, \overline{b}\}</eq></embed-katex>からどちらかを選んだ結果と等しくなる。そのためもはやこの場合分けは不要となり<embed-katex><eq class="zenn-katex">\mathcal{F}</eq></embed-katex>は次のようになる。</p>
<section class="zenn-katex"><eqn><embed-katex display-mode="1">
\mathcal{F}(a, b) = r \xleftarrow{\text{rnd}} \{a, \overline{b}\}
</embed-katex></eqn></section></math>
<p>元論文では、<embed-katex><eq class="zenn-katex">a, b</eq></embed-katex>を秘密にしたままこのような関数<embed-katex><eq class="zenn-katex">\mathcal{F}</eq></embed-katex>をカードプロトコルで構成していた。その説明が気になる人は元論文を入手してもらうとして、ここでは量子コンピュータを利用した方法を紹介する。</p>
<h1 id="bb84%E3%83%99%E3%83%BC%E3%82%B9%E3%81%AE2%E4%BA%BA%E3%81%AB%E3%82%88%E3%82%8B%E9%87%8F%E5%AD%90covert-lottery"><a class="header-anchor-link" href="79c6c48226166aa0e875.html#bb84%E3%83%99%E3%83%BC%E3%82%B9%E3%81%AE2%E4%BA%BA%E3%81%AB%E3%82%88%E3%82%8B%E9%87%8F%E5%AD%90covert-lottery" rel="nofollow"></a> BB84ベースの2人による量子Covert Lottery</h1>
<p>それでは実際に量子コンピュータを利用したナイーブなプロトコルについて説明する<sup class="footnote-ref"><a href="79c6c48226166aa0e875.html#fn4" id="fnref4">[4]</a></sup>。今、アリスとボブの2人が先手・後手を決めたいと考えている。前節と同様に<embed-katex><eq class="zenn-katex">1</eq></embed-katex>を先手、<embed-katex><eq class="zenn-katex">0</eq></embed-katex>を後手として次のようなプロトコルを実行する。</p>
<div class="msg alert"><p>後に述べるようにこのプロトコルには脆弱性がある！</p>
</div>
<p>まずは簡単さを優先したプロトコルを紹介し、そのあとどのような問題があるかを見ていくことにする。</p>
<h2 id="%E3%83%97%E3%83%AD%E3%83%88%E3%82%B3%E3%83%AB"><a class="header-anchor-link" href="79c6c48226166aa0e875.html#%E3%83%97%E3%83%AD%E3%83%88%E3%82%B3%E3%83%AB" rel="nofollow"></a> プロトコル</h2>
<ol>
<li>
<p>アリスは1bitの乱数<embed-katex><eq class="zenn-katex">x \xleftarrow{\text{rnd}} \{0, 1\}</eq></embed-katex>と、先手・後手の希望<embed-katex><eq class="zenn-katex">a \in \{0, 1\}</eq></embed-katex>を選択する</p>
</li>
<li>
<p>アリスは<embed-katex><eq class="zenn-katex">a, x</eq></embed-katex>を用いて次の4つ量子状態から1つ<embed-katex><eq class="zenn-katex">\ket{\psi_{a,x}}</eq></embed-katex>を選択する</p>
<section class="zenn-katex"><eqn><embed-katex display-mode="1">
    \def\bra#1{\mathinner{\left\langle{#1}\right|}}
    \def\ket#1{\mathinner{\left|{#1}\right\rangle}}
    \left\{
      \begin{array}{lcl}
        \ket{\psi_{0,0}} &amp; \equiv &amp; \ket{0} \\
        \ket{\psi_{0,1}} &amp; \equiv &amp; \ket{1} \\
        \ket{\psi_{1,0}} &amp; \equiv &amp; \ket{+} \\
        \ket{\psi_{1,1}} &amp; \equiv &amp; \ket{-}
      \end{array}
    \right.
    </embed-katex></eqn></section></math>
<ul>
<li>ただし<embed-katex><eq class="zenn-katex">\ket{\pm} \equiv \frac{1}{\sqrt{2}}\left(\ket{0} \pm \ket{1}\right)</eq></embed-katex>とする</li>
</ul>
</li>
<li>
<p>アリスはボブへ量子ビット<embed-katex><eq class="zenn-katex">\ket{\psi_{a,x}}</eq></embed-katex>を送信する</p>
</li>
<li>
<p>ボブは量子状態<embed-katex><eq class="zenn-katex">\ket{\psi_{a,x}}</eq></embed-katex>を受信し、ボブの希望<embed-katex><eq class="zenn-katex">b \in \{0, 1\}</eq></embed-katex>を選択する</p>
</li>
<li>
<p>ボブは次のような基底状態<embed-katex><eq class="zenn-katex">\mathcal{B}_{\overline{b}}</eq></embed-katex>で<embed-katex><eq class="zenn-katex">\ket{\psi_{a,x}}</eq></embed-katex>を測定し、測定結果を<embed-katex><eq class="zenn-katex">y</eq></embed-katex>とする</p>
<section class="zenn-katex"><eqn><embed-katex display-mode="1">
    \mathcal{B}_{\overline{b}} \equiv \left\{\ket{\psi_{\overline{b},0}}, \ket{\psi_{\overline{b},1}}\right\}
    </embed-katex></eqn></section></math>
<ul>
<li><embed-katex><eq class="zenn-katex">\overline{b}</eq></embed-katex>を利用することに注意する</li>
</ul>
</li>
<li>
<p>ボブはアリスへ<embed-katex><eq class="zenn-katex">y</eq></embed-katex>を送信する</p>
</li>
<li>
<p>アリスは<embed-katex><eq class="zenn-katex">y</eq></embed-katex>を受けとり、<embed-katex><eq class="zenn-katex">a \oplus x \oplus y</eq></embed-katex><sup class="footnote-ref"><a href="79c6c48226166aa0e875.html#fn5" id="fnref5">[5]</a></sup>をボブへ送信しプロトコルの結果とする</p>
</li>
</ol>
<p>このプロトコルだけ見せられても実際に正しく動作しているのかよく分からないと思うので、アリスの変数<embed-katex><eq class="zenn-katex">a, x</eq></embed-katex>とボブの変数<embed-katex><eq class="zenn-katex">b</eq></embed-katex>について<embed-katex><eq class="zenn-katex">y</eq></embed-katex>や<embed-katex><eq class="zenn-katex">a \oplus x \oplus y</eq></embed-katex>がどうなるのか？というのを次の表にまとめた。</p>
<table>
<thead>
<tr>
<th><embed-katex><eq class="zenn-katex">a</eq></embed-katex></th>
<th><embed-katex><eq class="zenn-katex">x</eq></embed-katex></th>
<th><embed-katex><eq class="zenn-katex">\ket{\psi_{a,x}}</eq></embed-katex></th>
<th><embed-katex><eq class="zenn-katex">\overline{b}</eq></embed-katex></th>
<th><embed-katex><eq class="zenn-katex">\mathcal{B}_{\overline{b}}</eq></embed-katex></th>
<th style="text-align:center"><embed-katex><eq class="zenn-katex">y</eq></embed-katex></th>
<th style="text-align:center"><embed-katex><eq class="zenn-katex">a \oplus x \oplus y</eq></embed-katex></th>
</tr>
</thead>
<tbody>
<tr>
<td><embed-katex><eq class="zenn-katex">0</eq></embed-katex>（後手）</td>
<td><embed-katex><eq class="zenn-katex">0</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">\ket{0}</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">0</eq></embed-katex>（先手）</td>
<td><embed-katex><eq class="zenn-katex">\left\{\ket{0}, \ket{1}\right\}</eq></embed-katex></td>
<td style="text-align:center"><embed-katex><eq class="zenn-katex">0</eq></embed-katex></td>
<td style="text-align:center"><embed-katex><eq class="zenn-katex">0</eq></embed-katex></td>
</tr>
<tr>
<td><embed-katex><eq class="zenn-katex">0</eq></embed-katex>（後手）</td>
<td><embed-katex><eq class="zenn-katex">0</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">\ket{0}</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">1</eq></embed-katex>（後手）</td>
<td><embed-katex><eq class="zenn-katex">\left\{\ket{+}, \ket{-}\right\}</eq></embed-katex></td>
<td style="text-align:center"><embed-katex><eq class="zenn-katex">r \xleftarrow{\text{rnd}} \{0, 1\}</eq></embed-katex></td>
<td style="text-align:center"><embed-katex><eq class="zenn-katex">r \xleftarrow{\text{rnd}} \{0, 1\}</eq></embed-katex></td>
</tr>
<tr>
<td><embed-katex><eq class="zenn-katex">0</eq></embed-katex>（後手）</td>
<td><embed-katex><eq class="zenn-katex">1</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">\ket{1}</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">0</eq></embed-katex>（先手）</td>
<td><embed-katex><eq class="zenn-katex">\left\{\ket{0}, \ket{1}\right\}</eq></embed-katex></td>
<td style="text-align:center"><embed-katex><eq class="zenn-katex">1</eq></embed-katex></td>
<td style="text-align:center"><embed-katex><eq class="zenn-katex">0</eq></embed-katex></td>
</tr>
<tr>
<td><embed-katex><eq class="zenn-katex">0</eq></embed-katex>（後手）</td>
<td><embed-katex><eq class="zenn-katex">1</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">\ket{1}</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">1</eq></embed-katex>（後手）</td>
<td><embed-katex><eq class="zenn-katex">\left\{\ket{+}, \ket{-}\right\}</eq></embed-katex></td>
<td style="text-align:center"><embed-katex><eq class="zenn-katex">r \xleftarrow{\text{rnd}} \{0, 1\}</eq></embed-katex></td>
<td style="text-align:center"><embed-katex><eq class="zenn-katex">r \xleftarrow{\text{rnd}} \{0, 1\}</eq></embed-katex></td>
</tr>
<tr>
<td><embed-katex><eq class="zenn-katex">1</eq></embed-katex>（先手）</td>
<td><embed-katex><eq class="zenn-katex">0</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">\ket{+}</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">0</eq></embed-katex>（先手）</td>
<td><embed-katex><eq class="zenn-katex">\left\{\ket{0}, \ket{1}\right\}</eq></embed-katex></td>
<td style="text-align:center"><embed-katex><eq class="zenn-katex">r \xleftarrow{\text{rnd}} \{0, 1\}</eq></embed-katex></td>
<td style="text-align:center"><embed-katex><eq class="zenn-katex">r \xleftarrow{\text{rnd}} \{0, 1\}</eq></embed-katex></td>
</tr>
<tr>
<td><embed-katex><eq class="zenn-katex">1</eq></embed-katex>（先手）</td>
<td><embed-katex><eq class="zenn-katex">0</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">\ket{+}</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">1</eq></embed-katex>（後手）</td>
<td><embed-katex><eq class="zenn-katex">\left\{\ket{+}, \ket{-}\right\}</eq></embed-katex></td>
<td style="text-align:center"><embed-katex><eq class="zenn-katex">0</eq></embed-katex></td>
<td style="text-align:center"><embed-katex><eq class="zenn-katex">1</eq></embed-katex></td>
</tr>
<tr>
<td><embed-katex><eq class="zenn-katex">1</eq></embed-katex>（先手）</td>
<td><embed-katex><eq class="zenn-katex">1</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">\ket{-}</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">0</eq></embed-katex>（先手）</td>
<td><embed-katex><eq class="zenn-katex">\left\{\ket{0}, \ket{1}\right\}</eq></embed-katex></td>
<td style="text-align:center"><embed-katex><eq class="zenn-katex">r \xleftarrow{\text{rnd}} \{0, 1\}</eq></embed-katex></td>
<td style="text-align:center"><embed-katex><eq class="zenn-katex">r \xleftarrow{\text{rnd}} \{0, 1\}</eq></embed-katex></td>
</tr>
<tr>
<td><embed-katex><eq class="zenn-katex">1</eq></embed-katex>（先手）</td>
<td><embed-katex><eq class="zenn-katex">1</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">\ket{-}</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">1</eq></embed-katex>（後手）</td>
<td><embed-katex><eq class="zenn-katex">\left\{\ket{+}, \ket{-}\right\}</eq></embed-katex></td>
<td style="text-align:center"><embed-katex><eq class="zenn-katex">1</eq></embed-katex></td>
<td style="text-align:center"><embed-katex><eq class="zenn-katex">1</eq></embed-katex></td>
</tr>
</tbody>
</table>
<p>このようにアリスとボブの先手・後手の希望が異なる時に限って最終的な出力<embed-katex><eq class="zenn-katex">a \oplus x \oplus y</eq></embed-katex>がアリスの先手・後手を示すようになっている。<br>
なぜこのようになるのか？そのアイディアをまとめると</p>
<ul>
<li><embed-katex><eq class="zenn-katex">a = \overline{b}\,(\Rightarrow a \ne b)</eq></embed-katex>のときは（5）の測定結果<embed-katex><eq class="zenn-katex">y</eq></embed-katex>はアリスの乱数<embed-katex><eq class="zenn-katex">x</eq></embed-katex>と必ず一致する
<ul>
<li>一方で<embed-katex><eq class="zenn-katex">a \ne \overline{b}</eq></embed-katex>のときは<embed-katex><eq class="zenn-katex">y</eq></embed-katex>が乱数になるため、<embed-katex><eq class="zenn-katex">a \oplus x \oplus y</eq></embed-katex>は最終的に乱数とXORするので乱数となりOKである</li>
</ul>
</li>
<li><embed-katex><eq class="zenn-katex">a = \overline{b}</eq></embed-katex>なときは<embed-katex><eq class="zenn-katex">x = y</eq></embed-katex>なので、したがって<embed-katex><eq class="zenn-katex">a \oplus x \oplus y</eq></embed-katex>のXORはキャンセルされて<embed-katex><eq class="zenn-katex">a</eq></embed-katex>が計算される</li>
</ul>
<h2 id="%E5%8F%82%E5%8A%A0%E8%80%85%E3%81%AE%E6%80%A7%E8%B3%AA"><a class="header-anchor-link" href="79c6c48226166aa0e875.html#%E5%8F%82%E5%8A%A0%E8%80%85%E3%81%AE%E6%80%A7%E8%B3%AA" rel="nofollow"></a> 参加者の性質</h2>
<p>このプロトコルでは（7）で最後にアリスの手元で行なわれる計算が最終的な結果となるため、アリスが不誠実であればここで結果を意図的に変更できる。したがってこれは少なくともアリスがセミオネスト<sup class="footnote-ref"><a href="79c6c48226166aa0e875.html#fn6" id="fnref6">[6]</a></sup>であるという仮定の下でしか上手くいかない。</p>
<h2 id="%E7%A2%BA%E7%8E%87%E7%9A%84%E3%81%AA%E6%83%85%E5%A0%B1%E3%83%AA%E3%83%BC%E3%82%AF"><a class="header-anchor-link" href="79c6c48226166aa0e875.html#%E7%A2%BA%E7%8E%87%E7%9A%84%E3%81%AA%E6%83%85%E5%A0%B1%E3%83%AA%E3%83%BC%E3%82%AF" rel="nofollow"></a> 確率的な情報リーク</h2>
<p>あらかじめ述べておいた脆弱性として、このプロトコルは確率でボブの情報（先手・後手の選択）がアリスへリークする。どういうことかを次のような具体的な例で考える。</p>
<ol>
<li>アリスは<embed-katex><eq class="zenn-katex">a = 0, x = 0</eq></embed-katex>を選んだため、送信するのは<embed-katex><eq class="zenn-katex">\ket{0}</eq></embed-katex>となる</li>
<li>ここでもしボブが<embed-katex><eq class="zenn-katex">\overline{b} = 1\,(\Rightarrow b = 0)</eq></embed-katex>を選んだとする</li>
<li>このとき<embed-katex><eq class="zenn-katex">\ket{0}</eq></embed-katex>を<embed-katex><eq class="zenn-katex">\left\{\ket{+}, \ket{-}\right\}</eq></embed-katex>で測定するため、50%ずつの確率で<embed-katex><eq class="zenn-katex">y = 0</eq></embed-katex>または<embed-katex><eq class="zenn-katex">y = 1</eq></embed-katex>が発生する
<ul>
<li>ここでもし<embed-katex><eq class="zenn-katex">y = 0</eq></embed-katex>となった場合はアリスへの情報リークは<strong>ない</strong></li>
</ul>
</li>
<li>一方でもしここで<embed-katex><eq class="zenn-katex">y = 1</eq></embed-katex>が生じた場合、<embed-katex><eq class="zenn-katex">\left\{\ket{0}, \ket{1}\right\}</eq></embed-katex>で測定した場合には100%で<embed-katex><eq class="zenn-katex">y = 0</eq></embed-katex>なため、<embed-katex><eq class="zenn-katex">\overline{b} = 1</eq></embed-katex>であることがリークする</li>
</ol>
<p>したがって、このプロトコルは最終的な結果は<embed-katex><eq class="zenn-katex">\mathcal{F}</eq></embed-katex>として問題ないが、アリスは確率的にボブの希望<embed-katex><eq class="zenn-katex">b</eq></embed-katex>を知ることができてしまい問題がある。</p>
<h1 id="cz%E3%82%B2%E3%83%BC%E3%83%88%E3%81%A81%E9%87%8F%E5%AD%90%E3%83%93%E3%83%83%E3%83%88%E3%81%AE%E6%B8%AC%E5%AE%9A%E5%9E%8B%E9%87%8F%E5%AD%90%E8%A8%88%E7%AE%97"><a class="header-anchor-link" href="79c6c48226166aa0e875.html#cz%E3%82%B2%E3%83%BC%E3%83%88%E3%81%A81%E9%87%8F%E5%AD%90%E3%83%93%E3%83%83%E3%83%88%E3%81%AE%E6%B8%AC%E5%AE%9A%E5%9E%8B%E9%87%8F%E5%AD%90%E8%A8%88%E7%AE%97" rel="nofollow"></a> CZゲートと1量子ビットの測定型量子計算</h1>
<p>先にプロトコルで利用する<embed-katex><eq class="zenn-katex">CZ</eq></embed-katex>ゲートと、Z軸に回転させた基底による測定について説明する。</p>
<h2 id="cz%E3%82%B2%E3%83%BC%E3%83%88"><a class="header-anchor-link" href="79c6c48226166aa0e875.html#cz%E3%82%B2%E3%83%BC%E3%83%88" rel="nofollow"></a> CZゲート</h2>
<section class="zenn-katex"><eqn><embed-katex display-mode="1">
CZ \equiv \ket{0}\bra{0}\otimes I + \ket{1}\bra{1}\otimes Z
</embed-katex></eqn></section></math>
<p>ただし<embed-katex><eq class="zenn-katex">I</eq></embed-katex>と<embed-katex><eq class="zenn-katex">Z</eq></embed-katex>は次のような量子ゲートになる<sup class="footnote-ref"><a href="79c6c48226166aa0e875.html#fn7" id="fnref7">[7]</a></sup>。</p>
<section class="zenn-katex"><eqn><embed-katex display-mode="1">
I \equiv \left(\begin{array}{cc}
  1 &amp; 0 \\
  0 &amp; 1
\end{array}\right), \;
Z \equiv \left(\begin{array}{cc}
  1 &amp; 0 \\
  0 &amp; -1 
\end{array}\right)
</embed-katex></eqn></section></math>
<p><embed-katex><eq class="zenn-katex">CZ</eq></embed-katex>ゲートは2量子ビットへの量子ゲートであり、次のような動作になる<sup class="footnote-ref"><a href="79c6c48226166aa0e875.html#fn8" id="fnref8">[8]</a></sup>。</p>
<ul>
<li>1番目の量子ビットの状態が<embed-katex><eq class="zenn-katex">\ket{0}</eq></embed-katex>であれば、2番目の量子ビットに何もしない</li>
<li>1番目の量子ビットの状態が<embed-katex><eq class="zenn-katex">\ket{1}</eq></embed-katex>であれば、2番目に<embed-katex><eq class="zenn-katex">Z</eq></embed-katex>量子ゲートを作用させる</li>
</ul>
<p>今、例として<embed-katex><eq class="zenn-katex">\ket{\chi} := a\ket{0} + b\ket{1}</eq></embed-katex>と<embed-katex><eq class="zenn-katex">\ket{+}</eq></embed-katex>を<embed-katex><eq class="zenn-katex">CZ</eq></embed-katex>ゲートで結合したとすると、次のようになる。</p>
<section class="zenn-katex"><eqn><embed-katex display-mode="1">
\begin{array}{lcl}
  CZ\ket{\chi}_1\ket{+}_2 &amp; = &amp; \ket{0}\mathinner{\left\langle{0}|\chi\right\rangle}_1 I\ket{+}_2 + \ket{1}\mathinner{\left\langle{1}|\chi\right\rangle}_1 Z\ket{+}_2 \\
  &amp; = &amp; \ket{0}\mathinner{\left\langle{0}|\chi\right\rangle}_1 \ket{+}_2 + \ket{1}\mathinner{\left\langle{1}|\chi\right\rangle}_1 \ket{-}_2 \\
  &amp; = &amp; a\ket{0}_1\ket{+}_2 + b\ket{1}_1\ket{-}_2
\end{array}
</embed-katex></eqn></section></math>
<p>ここで、各量子ビットについている<embed-katex><eq class="zenn-katex">1,2</eq></embed-katex>の添字はそれぞれ1番目の量子ビット、2番目の量子ビットを意味する。</p>
<h2 id="1%E9%87%8F%E5%AD%90%E3%83%93%E3%83%83%E3%83%88%E3%81%AE%E6%B8%AC%E5%AE%9A%E5%9E%8B%E9%87%8F%E5%AD%90%E8%A8%88%E7%AE%97"><a class="header-anchor-link" href="79c6c48226166aa0e875.html#1%E9%87%8F%E5%AD%90%E3%83%93%E3%83%83%E3%83%88%E3%81%AE%E6%B8%AC%E5%AE%9A%E5%9E%8B%E9%87%8F%E5%AD%90%E8%A8%88%E7%AE%97" rel="nofollow"></a> 1量子ビットの測定型量子計算</h2>
<p>さらに、この<embed-katex><eq class="zenn-katex">CZ</eq></embed-katex>ゲートを適用した<embed-katex><eq class="zenn-katex">CZ\ket{\chi}_1\ket{+}_2</eq></embed-katex>の射影測定について考える。普通の測定では<embed-katex><eq class="zenn-katex">\left\{\ket{0}, \ket{1}\right\}</eq></embed-katex>を利用するが、ここでは適当な角度<embed-katex><eq class="zenn-katex">\phi</eq></embed-katex>を用いた<embed-katex><eq class="zenn-katex">\left\{\ket{0} \pm e^{i\phi}\ket{1}\right\}</eq></embed-katex>を利用する。<br>
今1量子ビット目にある<embed-katex><eq class="zenn-katex">\ket{\chi}_1</eq></embed-katex>を測定し、<embed-katex><eq class="zenn-katex">\ket{0} + e^{i\phi}\ket{1}</eq></embed-katex>得られたとすると、2番目の量子ビットは次のようになる。</p>
<section class="zenn-katex"><eqn><embed-katex display-mode="1">
\begin{array}{ll}
  &amp; (\ket{0}_1 + e^{i\phi}\ket{1}_1)(\bra{0}_1 + e^{i\phi}\bra{1}_1) \cdot (a\ket{0}_1\ket{+}_2 + b\ket{1}_1\ket{-}_2) \\
  = &amp; (\ket{0}_1 + e^{i\phi}\ket{1}_1)(a\ket{+}_2 + be^{i\phi}\ket{-}_2)
\end{array}
</embed-katex></eqn></section></math>
<p>この<embed-katex><eq class="zenn-katex">a\ket{+}_2 + be^{i\phi}\ket{-}_2</eq></embed-katex>はさらに次のように変形できる。</p>
<section class="zenn-katex"><eqn><embed-katex display-mode="1">
\begin{array}{lcl}
  a\ket{+}_2 + be^{i\phi}\ket{-}_2 &amp; = &amp; \frac{1}{\sqrt{2}}\left(a\ket{0} + a\ket{1} + be^{i\phi}\ket{0} - be^{i\phi}\ket{1}\right) \\
  &amp; = &amp; \frac{1}{\sqrt{2}}\left((a + be^{i\phi})\ket{0} + (a - be^{i\phi})\ket{1}\right)
\end{array}
</embed-katex></eqn></section></math>
<p>これはアダマールゲート<embed-katex><eq class="zenn-katex">H</eq></embed-katex>と位相ゲート<embed-katex><eq class="zenn-katex">R_Z</eq></embed-katex><sup class="footnote-ref"><a href="79c6c48226166aa0e875.html#fn9" id="fnref9">[9]</a></sup>を利用して最終的に次のようになる。</p>
<section class="zenn-katex"><eqn><embed-katex display-mode="1">
\begin{array}{lcl}
  \frac{1}{\sqrt{2}}\left((a + be^{i\phi})\ket{0} + (a - be^{i\phi})\ket{1}\right) &amp; = &amp; HR_Z(\phi)\ket{\chi} \\
\end{array}
</embed-katex></eqn></section></math>
<p>もし射影測定で直交する<embed-katex><eq class="zenn-katex">\ket{0} - e^{i\phi}\ket{1}</eq></embed-katex>が観測された場合は量子的なNOTである<embed-katex><eq class="zenn-katex">X</eq></embed-katex>ゲートによって次のように表現できる。</p>
<section class="zenn-katex"><eqn><embed-katex display-mode="1">
XHR_Z(\phi)\ket{\chi}
</embed-katex></eqn></section></math>
<p>なおアダマールゲート<embed-katex><eq class="zenn-katex">H</eq></embed-katex>、位相ゲート<embed-katex><eq class="zenn-katex">R_Z</eq></embed-katex>そして<embed-katex><eq class="zenn-katex">X</eq></embed-katex>はそれぞれ次のようになる。</p>
<section class="zenn-katex"><eqn><embed-katex display-mode="1">
H \equiv \frac{1}{\sqrt{2}}\left(\begin{array}{cc}
  1 &amp; 1 \\
  1 &amp; -1
\end{array}\right), \;
R_Z(x) \equiv \left(\begin{array}{cc}
  1 &amp; 0 \\
  0 &amp; e^{ix}
\end{array}\right), \;
X \equiv \left(\begin{array}{cc}
  0 &amp; 1 \\
  1 &amp; 0
\end{array}\right)
</embed-katex></eqn></section></math>
<p>この一連の操作で生じたことというのは、1番目の量子ビット<embed-katex><eq class="zenn-katex">\ket{\chi}</eq></embed-katex>が<embed-katex><eq class="zenn-katex">CZ</eq></embed-katex>ゲートで連結された2番目の量子ビット<embed-katex><eq class="zenn-katex">\ket{+}</eq></embed-katex>へ移動（テレポート）し、かつ角度<embed-katex><eq class="zenn-katex">\phi</eq></embed-katex>を埋め込んだ基底を測定に利用することで、<embed-katex><eq class="zenn-katex">\ket{\chi}</eq></embed-katex>にアダマールゲートと位相ゲートを作用させた状態となった。場合によっては<embed-katex><eq class="zenn-katex">X</eq></embed-katex>ゲートが入ってしまうが、それは1番目の量子ビットを測定した観測結果によって<embed-katex><eq class="zenn-katex">X</eq></embed-katex>ゲートが生じたかどうか？が明らかなので問題はない。</p>
<h1 id="2%E4%BA%BA%E3%81%AE%E3%83%96%E3%83%A9%E3%82%A4%E3%83%B3%E3%83%89%E9%87%8F%E5%AD%90covert-lottery"><a class="header-anchor-link" href="79c6c48226166aa0e875.html#2%E4%BA%BA%E3%81%AE%E3%83%96%E3%83%A9%E3%82%A4%E3%83%B3%E3%83%89%E9%87%8F%E5%AD%90covert-lottery" rel="nofollow"></a> 2人のブラインド量子Covert Lottery</h1>
<p>ここからはやや複雑な方法に挑戦する。先にアイディアを述べると、これはブラインド量子計算<sup class="footnote-ref"><a href="79c6c48226166aa0e875.html#fn10" id="fnref10">[10]</a></sup>のような方法で、前節では古典的に行なっていたXORのような操作を量子2量子ビットのもつれで行うようなイメージである。</p>
<ol>
<li>
<p>アリスはランダムな角度<embed-katex><eq class="zenn-katex">\theta \xleftarrow{\text{rnd}} \left\{0, \frac{1\pi}{4}, \dots, \frac{7\pi}{4}\right\}</eq></embed-katex>を選ぶ</p>
</li>
<li>
<p>アリスは次のような1量子ビット<embed-katex><eq class="zenn-katex">\ket{+_\theta}</eq></embed-katex>を作成しボブへ送信する</p>
<section class="zenn-katex"><eqn><embed-katex display-mode="1">
    \ket{+_\theta} \equiv \frac{1}{\sqrt{2}}\left(\ket{0} + e^{-i\theta}\ket{1}\right)
    </embed-katex></eqn></section></math>
</li>
<li>
<p>ボブはアリスから受けとった<embed-katex><eq class="zenn-katex">\ket{+_\theta}</eq></embed-katex>と<embed-katex><eq class="zenn-katex">\ket{+}</eq></embed-katex>を次のような<embed-katex><eq class="zenn-katex">CZ</eq></embed-katex>ゲートで結合する</p>
<section class="zenn-katex"><eqn><embed-katex display-mode="1">
    CZ\ket{+_\theta}_1\ket{+}_2
    </embed-katex></eqn></section></math>
<ul>
<li>
<p><embed-katex><eq class="zenn-katex">CZ\ket{+_\theta}_1\ket{+}_2</eq></embed-katex>は次のように整理できる</p>
<section class="zenn-katex"><eqn><embed-katex display-mode="1">
        CZ\ket{+_\theta}_1\ket{+}_2 = \frac{1}{\sqrt{2}}\ket{0}_1\ket{+}_2 + \frac{e^{-i\theta}}{\sqrt{2}}\ket{1}_1\ket{-}_2
        </embed-katex></eqn></section></math>
</li>
</ul>
</li>
<li>
<p>アリスは希望<embed-katex><eq class="zenn-katex">a \in {0, 1}</eq></embed-katex>と乱数<embed-katex><eq class="zenn-katex">x \xleftarrow{\text{rnd}} \{0, 1\}</eq></embed-katex>を選び、それに基づいて次のような角度<embed-katex><eq class="zenn-katex">\delta</eq></embed-katex>を選びボブへ送信する</p>
<section class="zenn-katex"><eqn><embed-katex display-mode="1">
    \delta := \left\{
      \begin{array}{ll}
        \theta + x\pi&amp; \text{if}\; a = 0 \\
        \theta + \frac{\pi}{2} + x\pi &amp; \text{if}\; a = 1
      \end{array}
    \right.
    </embed-katex></eqn></section></math>
<p></p>
</li>
<li>
<p>ボブは受けとった<embed-katex><eq class="zenn-katex">\delta</eq></embed-katex>から次のような基底<embed-katex><eq class="zenn-katex">\left\{\ket{0} \pm e^{i\delta}\ket{1}\right\}</eq></embed-katex>を用意して1番目の量子ビットを測定し、その結果を<embed-katex><eq class="zenn-katex">y \in \{0, 1\}</eq></embed-katex>とする</p>
</li>
<li>
<p>ボブは希望<embed-katex><eq class="zenn-katex">b \in \{0, 1\}</eq></embed-katex>を選び、それによって次から基底<embed-katex><eq class="zenn-katex">\mathcal{B}_{\overline{b}}</eq></embed-katex>を作成する</p>
<section class="zenn-katex"><eqn><embed-katex display-mode="1">
    \left\{
      \begin{array}{lcl}
        \mathcal{B}_{0} &amp; \equiv &amp; \left\{\ket{\pm}\right\} \\
        \mathcal{B}_{1} &amp; \equiv &amp; \left\{\frac{1}{\sqrt{2}}\left(\ket{0} \pm i\ket{1}\right)\right\}
      \end{array}
    \right.
    </embed-katex></eqn></section></math>
</li>
<li>
<p>ボブは2番目の量子ビットを<embed-katex><eq class="zenn-katex">\mathcal{B}_{\overline{b}}</eq></embed-katex>で測定して結果を<embed-katex><eq class="zenn-katex">z</eq></embed-katex>とする</p>
</li>
<li>
<p>ボブは<embed-katex><eq class="zenn-katex">t := y \oplus z</eq></embed-katex>をアリスへ送信する</p>
</li>
<li>
<p>アリスはプロトコルの出力として<embed-katex><eq class="zenn-katex">a \oplus x \oplus t</eq></embed-katex>を得る</p>
</li>
</ol>
<h2 id="%E8%A7%A3%E8%AA%AC"><a class="header-anchor-link" href="79c6c48226166aa0e875.html#%E8%A7%A3%E8%AA%AC" rel="nofollow"></a> 解説</h2>
<p>手順（5）の測定がややこしい。<embed-katex><eq class="zenn-katex">CZ</eq></embed-katex>ゲートの節を参考にすると、1番目の量子ビットを基底<embed-katex><eq class="zenn-katex">\left\{\ket{0} \pm e^{i\delta}\ket{1}\right\}</eq></embed-katex>で測定した後の2番目の量子ビットは次のようになる。</p>
<ol>
<li>
<p><embed-katex><eq class="zenn-katex">y = 0</eq></embed-katex>のとき</p>
<section class="zenn-katex"><eqn><embed-katex display-mode="1">
    \begin{array}{lcl}
      HR_Z(\delta)\ket{+_\theta} &amp; = &amp; H\left(\ket{0} + e^{-i\theta}\cdot e^{i\delta}\ket{1}\right) \\
      &amp; = &amp; H\left(\ket{0} + e^{i(\delta - \theta)}\ket{1}\right)
    \end{array}
    </embed-katex></eqn></section></math>
</li>
<li>
<p><embed-katex><eq class="zenn-katex">y = 1</eq></embed-katex>のとき</p>
<section class="zenn-katex"><eqn><embed-katex display-mode="1">
    XHR_Z(\delta)\ket{+_\theta} = XH\left(\ket{0} + e^{i(\delta - \theta)}\ket{1}\right)
    </embed-katex></eqn></section></math>
</li>
</ol>
<p>したがって<embed-katex><eq class="zenn-katex">\delta - \theta</eq></embed-katex>の結果によって2番目の量子ビットがどのようになるかが決定される。ここでアリスの選択に応じて2番目の量子ビットがどのように変化するのかを次の表にまとめた。</p>
<table>
<thead>
<tr>
<th><embed-katex><eq class="zenn-katex">a</eq></embed-katex></th>
<th><embed-katex><eq class="zenn-katex">x</eq></embed-katex></th>
<th style="text-align:center"><embed-katex><eq class="zenn-katex">\delta</eq></embed-katex></th>
<th><embed-katex><eq class="zenn-katex">y</eq></embed-katex></th>
<th>2番目の量子ビット</th>
</tr>
</thead>
<tbody>
<tr>
<td><embed-katex><eq class="zenn-katex">0</eq></embed-katex>（後手）</td>
<td><embed-katex><eq class="zenn-katex">0</eq></embed-katex></td>
<td style="text-align:center"><embed-katex><eq class="zenn-katex">\theta</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">0</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">H\ket{0} = \ket{+}</eq></embed-katex></td>
</tr>
<tr>
<td><embed-katex><eq class="zenn-katex">0</eq></embed-katex>（後手）</td>
<td><embed-katex><eq class="zenn-katex">0</eq></embed-katex></td>
<td style="text-align:center"><embed-katex><eq class="zenn-katex">\theta</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">1</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">XH\ket{0} = \ket{-}</eq></embed-katex></td>
</tr>
<tr>
<td><embed-katex><eq class="zenn-katex">0</eq></embed-katex>（後手）</td>
<td><embed-katex><eq class="zenn-katex">1</eq></embed-katex></td>
<td style="text-align:center"><embed-katex><eq class="zenn-katex">\theta + \pi</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">0</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">H\ket{1} = \ket{-}</eq></embed-katex></td>
</tr>
<tr>
<td><embed-katex><eq class="zenn-katex">0</eq></embed-katex>（後手）</td>
<td><embed-katex><eq class="zenn-katex">1</eq></embed-katex></td>
<td style="text-align:center"><embed-katex><eq class="zenn-katex">\theta + \pi</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">1</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">XH\ket{1} = \ket{+}</eq></embed-katex></td>
</tr>
<tr>
<td><embed-katex><eq class="zenn-katex">1</eq></embed-katex>（後手）</td>
<td><embed-katex><eq class="zenn-katex">0</eq></embed-katex></td>
<td style="text-align:center"><embed-katex><eq class="zenn-katex">\theta + \frac{\pi}{2}</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">0</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">H(\ket{0} + i\ket{1}</eq></embed-katex></td>
</tr>
<tr>
<td><embed-katex><eq class="zenn-katex">1</eq></embed-katex>（後手）</td>
<td><embed-katex><eq class="zenn-katex">0</eq></embed-katex></td>
<td style="text-align:center"><embed-katex><eq class="zenn-katex">\theta + \frac{\pi}{2}</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">1</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">XH(\ket{0} + i\ket{1}</eq></embed-katex></td>
</tr>
<tr>
<td><embed-katex><eq class="zenn-katex">1</eq></embed-katex>（後手）</td>
<td><embed-katex><eq class="zenn-katex">1</eq></embed-katex></td>
<td style="text-align:center"><embed-katex><eq class="zenn-katex">\theta + \frac{\pi}{2} + \pi</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">0</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">H(\ket{0} - i\ket{1})</eq></embed-katex></td>
</tr>
<tr>
<td><embed-katex><eq class="zenn-katex">1</eq></embed-katex>（後手）</td>
<td><embed-katex><eq class="zenn-katex">1</eq></embed-katex></td>
<td style="text-align:center"><embed-katex><eq class="zenn-katex">\theta + \frac{\pi}{2} + \pi</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">1</eq></embed-katex></td>
<td><embed-katex><eq class="zenn-katex">XH(\ket{0} - i\ket{1})</eq></embed-katex></td>
</tr>
</tbody>
</table>
<p>ここでアリスが後手を選んだ状態はよく知られた状態<embed-katex><eq class="zenn-katex">\ket{+}, \ket{-}</eq></embed-katex>となっているが、一方で残った2つはどういう状態かが問題となる。この状態は<embed-katex><eq class="zenn-katex">\delta</eq></embed-katex>に<embed-katex><eq class="zenn-katex">\frac{\pi}{2} = 90^\circ</eq></embed-katex>が加算されているため、<embed-katex><eq class="zenn-katex">\ket{+}, \ket{-}</eq></embed-katex>から丁度<embed-katex><eq class="zenn-katex">\frac{\pi}{2}</eq></embed-katex>ずらしたところである。</p>
<p><img src="https://storage.googleapis.com/zenn-user-upload/d9749ef2c77a473f65570e34.png" alt="" width="400"><br>
<em>ブロッホ球のZ軸から見た時の位置関係</em></p>
<p>このあとボブは手順（6）で基底<embed-katex><eq class="zenn-katex">\mathcal{B}_{\overline{b}}</eq></embed-katex>を選ぶが、<embed-katex><eq class="zenn-katex">H(\ket{0} \pm i\ket{1}) = \frac{1}{\sqrt{2}}\left(\ket{0} \pm i\ket{1}\right)</eq></embed-katex>なのでボブの希望<embed-katex><eq class="zenn-katex">b</eq></embed-katex>によって上図の実線にあたる<embed-katex><eq class="zenn-katex">\{\ket{\pm}\}</eq></embed-katex>が基底となるか、それとも破線にあたる<embed-katex><eq class="zenn-katex">\{ \frac{1}{\sqrt{2}}\left(\ket{0} \pm i\ket{1}\right)\}</eq></embed-katex>が基底となるかが決定する。アリスとボブの選択が等しいとき（<embed-katex><eq class="zenn-katex">a = b</eq></embed-katex>）は2番目の量子ビットがと基底が<embed-katex><eq class="zenn-katex">\frac{\pi}{2}</eq></embed-katex>ずれているため結果はランダムになり、そうでないときは<embed-katex><eq class="zenn-katex">y \oplus z = x</eq></embed-katex>となる。<br>
そして手順（9）の最終的な結果は、1番目と2番目の量子ビット測定結果のXORである<embed-katex><eq class="zenn-katex">y \oplus z</eq></embed-katex>は<embed-katex><eq class="zenn-katex">a \ne b</eq></embed-katex>の場合は常に<embed-katex><eq class="zenn-katex">x</eq></embed-katex>と等しくなる。したがってこのときに限っては確実に<embed-katex><eq class="zenn-katex">a \oplus x \oplus t = a</eq></embed-katex>となり、<embed-katex><eq class="zenn-katex">\mathcal{F}</eq></embed-katex>の出力として妥当となる。</p>
<h1 id="covert-lottery%E3%81%A8%E3%82%AC%E3%83%81%E3%83%A3"><a class="header-anchor-link" href="79c6c48226166aa0e875.html#covert-lottery%E3%81%A8%E3%82%AC%E3%83%81%E3%83%A3" rel="nofollow"></a> Covert Lotteryとガチャ</h1>
<p>元論文でもCovert Lotteryと呼ばれているように、これは先手・後手の決定とは別にくじに使うことができる。元論文ではこの2人のCovert Lotteryを任意の多人数へ拡張して次のような説明をしている。</p>
<ul>
<li><embed-katex><eq class="zenn-katex">n</eq></embed-katex>人の<embed-katex><eq class="zenn-katex">P_1, \dots P_n</eq></embed-katex>参加者が<embed-katex><eq class="zenn-katex">m</eq></embed-katex>個の景品<embed-katex><eq class="zenn-katex">I_1, \dots, I_m</eq></embed-katex>のうちいくつか（0個もOK）が欲しいと考えている</li>
<li>景品<embed-katex><eq class="zenn-katex">I_i</eq></embed-katex>について、プレイヤーは<embed-katex><eq class="zenn-katex">0</eq></embed-katex>または<embed-katex><eq class="zenn-katex">1</eq></embed-katex>を投票する</li>
<li>このとき
<ol>
<li>もし1人のプレイヤー<embed-katex><eq class="zenn-katex">P_j</eq></embed-katex>のみが<embed-katex><eq class="zenn-katex">1</eq></embed-katex>を投票し、それ以外の全プレイヤーが<embed-katex><eq class="zenn-katex">0</eq></embed-katex>を投票していれば<embed-katex><eq class="zenn-katex">P_j</eq></embed-katex>が景品<embed-katex><eq class="zenn-katex">I_i</eq></embed-katex>を入手する</li>
<li>一方で複数のプレイヤーが<embed-katex><eq class="zenn-katex">1</eq></embed-katex>を投票した場合は、そのプレイヤーの中からランダムに1人を決定する</li>
</ol>
</li>
</ul>
<p>つまり、2人のCovert Lotteryも上記のように考えると、2人のプレイヤーにおいて次のようになる。</p>
<ul>
<li>どちらか1人のみ景品が欲しい場合はそちらに景品が当選する</li>
<li>2人ともが景品が欲しい・欲くない場合はランダムに当選者が選択される</li>
</ul>
<p>つまり複数のプレイヤー間で、プレイヤーの希望を隠蔽したまま景品をなるべく希望に沿う形で当選させることができる。たとえば欲しくない景品が当選したので転売するといったことはあるだろうと思うので、そういったことをなるべく少なくできるかもしれない。</p>
<h1 id="%E3%81%BE%E3%81%A8%E3%82%81"><a class="header-anchor-link" href="79c6c48226166aa0e875.html#%E3%81%BE%E3%81%A8%E3%82%81" rel="nofollow"></a> まとめ</h1>
<p>アリスがセミオネストであるという仮定をなんとか取り除けないか多少は考えたものの、すぐには思いつかなかったのでいったんこのままで公開することにした。もしよい方法を思いついたという方がいれば教えてほしい。<br>
また元論文では今回紹介した2人のプロトコルを任意の人数へ拡張していたため、そちらも量子プロトコルで達成できないか？というのを考えてみたい。</p>
<section class="footnotes">
<div class="footnotes-title"><img src="https://twemoji.maxcdn.com/2/svg/1f58b.svg" class="emoji footnotes-twemoji" loading="lazy" width="20" height="20">脚注</div>
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>この論文のことを今後は「元論文」という呼ぶことにする。 <a href="79c6c48226166aa0e875.html#fnref1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn2" class="footnote-item"><p>この文書を読むうえではカードベース暗号の知識は必要ないが、これはこれで非常におもしろいので、たとえば<a href="https://doi.org/10.1587/essfr.9.3_179" rel="nofollow">カード組を用いた秘密計算</a>といった文献を読むとよい。 <a href="79c6c48226166aa0e875.html#fnref2" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn3" class="footnote-item"><p>元論文では矢印の上に<code>$</code>（LaTeX表記では<code>\xleftarrow{\text{$}}</code>）の記号を利用してランダムを表現しているが、Zennのパーザーの都合（？）でこの表記が数式として認められなかったため表記を変更した。 <a href="79c6c48226166aa0e875.html#fnref3" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn4" class="footnote-item"><p>この記事では量子コンピュータの基本的な演算の知識を前提としている。このあたりは拙著の<a href="https://qiita.com/yyu/items/efcf471ce9b97e885957#%E5%8F%A4%E5%85%B8%E8%A8%88%E7%AE%97%E6%A9%9F%E3%81%A8%E9%87%8F%E5%AD%90%E3%82%B3%E3%83%B3%E3%83%94%E3%83%A5%E3%83%BC%E3%82%BF" rel="nofollow">量子コンピュータを利用した公平なガチャ#古典計算機と量子コンピュータ</a>などを参考にしてほしい。 <a href="79c6c48226166aa0e875.html#fnref4" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn5" class="footnote-item"><p><embed-katex><eq class="zenn-katex">\oplus</eq></embed-katex>はXOR演算を表す。 <a href="79c6c48226166aa0e875.html#fnref5" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn6" class="footnote-item"><p>プレイヤーが「セミオネスト（<em>semi-honest</em>）」であるとき、このプレイヤーはプロトコルの指示には違反しないが、プロトコルの指示に従う限りで（できるなら）他プレイヤーの情報を奪うといった不誠実な振る舞いをする。 <a href="79c6c48226166aa0e875.html#fnref6" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn7" class="footnote-item"><p>記号<embed-katex><eq class="zenn-katex">\otimes</eq></embed-katex>はテンソル積を表す。 <a href="79c6c48226166aa0e875.html#fnref7" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn8" class="footnote-item"><p><embed-katex><eq class="zenn-katex">CZ</eq></embed-katex>ゲートは1番目・2番目の量子ビットを入れかえても量子的な効果に違いはない。これは数式で言うと<embed-katex><eq class="zenn-katex">\ket{0}\bra{0}\otimes I + \ket{1}\bra{1}\otimes Z = I \otimes \ket{0}\bra{0} + Z \otimes \ket{1}\bra{1}</eq></embed-katex>となることを意味する。したがって実際にはこの説明で1番目や2番目などと区別する必要性はないが、順番を明瞭にしないまま説明するのも不要な混乱を与えると考えてここでは順番を明示した。 <a href="79c6c48226166aa0e875.html#fnref8" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn9" class="footnote-item"><p>この位相ゲートは<a href="https://ja.wikipedia.org/wiki/%E3%83%96%E3%83%AD%E3%83%83%E3%83%9B%E7%90%83" rel="nofollow">ブロッホ球</a>における<embed-katex><eq class="zenn-katex">Z</eq></embed-katex>軸回転を表すためこのような表記とした。 <a href="79c6c48226166aa0e875.html#fnref9" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn10" class="footnote-item"><p>ブラインド量子計算はセキュアクラウド量子計算とも呼ばれ、実際の計算内容や入力を秘密にしたまま量子計算を代行してもらう技術である。ブラインド量子計算について得に知らなくてもこの文書は読めるように書いたつもりだが、詳細が気になる方は<a href="https://www.amazon.co.jp/dp/4339028703" rel="nofollow">観測に基づく量子計算</a>といった本がおすすめできる。 <a href="79c6c48226166aa0e875.html#fnref10" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>
</div></div></div></div></article></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"article":{"slug":"79c6c48226166aa0e875","content":"\u003ch1 id=\"%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003e\u003ca class=\"header-anchor-link\" href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\" rel=\"nofollow\"\u003e\u003c/a\u003e はじめに\u003c/h1\u003e\n\u003cp\u003e“\u003cem\u003eCovert Lottery\u003c/em\u003e” とは論文\u003ca href=\"https://doi.org/10.1007/978-3-030-69255-1_17\" rel=\"nofollow\"\u003eCard-Based Covert Lottery\u003c/a\u003e\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#fn1\" id=\"fnref1\"\u003e[1]\u003c/a\u003e\u003c/sup\u003eで導入された用語である。これはプレイヤーの秘密の希望を入力し、\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eそれらが衝突しないのであれば希望通りにし\u003c/li\u003e\n\u003cli\u003eそうでないなら、ランダムな結果を出力する\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eというプロトコルである。たとえば将棋などで2人のプレイヤーが先手・後手を決める場合に使うことができる。この2人のプレイヤーはそれぞれ先手・後手のどちらにしたいという希望があるものとするが、一方でこの希望を相手に明らかにしてしまうと、戦略が流出する可能性がある。したがってこのプレイヤー2人がCovert Lotteryを行えば、各々の希望が先手・後手の希望が噛み合った（衝突していない）時にはそれを出力し、一方で2人ともが先手・後手のいずれかを希望した場合はランダムに決定する。このようにすれば2人のプレイヤーは自分の入力した希望通りとなったのか、それとも衝突してランダムに決定されたのか知ることができないため、戦略が流出しない。\u003cbr\u003e\n元論文ではこのようなプロトコルをカードベース暗号\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#fn2\" id=\"fnref2\"\u003e[2]\u003c/a\u003e\u003c/sup\u003eで構成しているが、筆者が軽く読んだ限りでは量子コイントスでも達成できそうであったため、この記事では量子コイントスでこれをどのように達成するかについて議論する。\u003cbr\u003e\nこの記事にもし何かの誤りがあったとしてもこの記事の筆者の落ち度であるので、コメントなどで気軽に教えてほしい。\u003c/p\u003e\n\u003ch1 id=\"2%E4%BA%BA%E3%81%AEcovert-lottery%E3%82%92%E8%A1%8C%E3%81%86%E9%96%A2%E6%95%B0\"\u003e\u003ca class=\"header-anchor-link\" href=\"#2%E4%BA%BA%E3%81%AEcovert-lottery%E3%82%92%E8%A1%8C%E3%81%86%E9%96%A2%E6%95%B0\" rel=\"nofollow\"\u003e\u003c/a\u003e 2人のCovert Lotteryを行う関数\u003c/h1\u003e\n\u003cp\u003eこの節では元論文で説明されている2人のCovert Lottery（先手・後手を秘密に決定する）についてまず説明する。いま2人のプレイヤーとしてアリスとボブがいるものとする。アリスの入力を\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea\u003c/eq\u003e\u003c/embed-katex\u003eとして、アリスが先手を希望するならならば\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea = 1\u003c/eq\u003e\u003c/embed-katex\u003eとなり、後手を希望するなら\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea = 0\u003c/eq\u003e\u003c/embed-katex\u003eとなる。ボブについても同様に先手を希望するなら\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eb = 1\u003c/eq\u003e\u003c/embed-katex\u003eであり、後手を希望するなら\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eb = 0\u003c/eq\u003e\u003c/embed-katex\u003eとする。つまり先手なら\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e、後手なら\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003eというエンコードになっている。\u003cbr\u003e\nそして\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\mathcal{F}\u003c/eq\u003e\u003c/embed-katex\u003eを「アリスの先手・後手を出力する関数」であるとすると、次のようになる。\u003c/p\u003e\n\u003csection class=\"zenn-katex\"\u003e\u003ceqn\u003e\u003cembed-katex display-mode=\"1\"\u003e\n\\mathcal{F}(a, b) := \\left\\{\n  \\begin{array}{lr}\n    a \u0026amp; \\text{if}\\; a \\ne b \\\\\n    i \\xleftarrow{\\text{rnd}} \\{0, 1\\} \u0026amp; \\text{if}\\; a = b\n  \\end{array}\n\\right.\n\u003c/embed-katex\u003e\u003c/eqn\u003e\u003c/section\u003e\u003c/math\u003e\n\u003cp\u003eただし\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\xleftarrow{\\text{rnd}} \\{0, 1\\}\u003c/eq\u003e\u003c/embed-katex\u003eは\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\{0, 1\\}\u003c/eq\u003e\u003c/embed-katex\u003eからランダムに片方を選ぶことを意味している\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#fn3\" id=\"fnref3\"\u003e[3]\u003c/a\u003e\u003c/sup\u003e。\u003c/p\u003e\n\u003cp\u003e議論の前に、この後すぐに使うので先に表記として\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\overline{x}\u003c/eq\u003e\u003c/embed-katex\u003eを導入しておく。これは\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ex \\in \\{0,1\\}\u003c/eq\u003e\u003c/embed-katex\u003eにNOT演算を適用した結果を意味している。たとえば\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ex = 0\u003c/eq\u003e\u003c/embed-katex\u003eであれば\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\overline{x} = 1\u003c/eq\u003e\u003c/embed-katex\u003eとなる。\u003c/p\u003e\n\u003cp\u003eさて、この関数\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\mathcal{F}\u003c/eq\u003e\u003c/embed-katex\u003eについて考える。今もし\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea \\ne b\u003c/eq\u003e\u003c/embed-katex\u003eであったとしたら、\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea, b \\in \\{0, 1\\}\u003c/eq\u003e\u003c/embed-katex\u003eであるから、\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea = \\overline{b}\u003c/eq\u003e\u003c/embed-katex\u003eとなる。逆に\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea = b\u003c/eq\u003e\u003c/embed-katex\u003eであれば\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\{a, \\overline{b}\\} = \\{0, 1\\}\u003c/eq\u003e\u003c/embed-katex\u003eである。この2つをまとめると\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\mathcal{F}\u003c/eq\u003e\u003c/embed-katex\u003eを次のように書き直せる。\u003c/p\u003e\n\u003csection class=\"zenn-katex\"\u003e\u003ceqn\u003e\u003cembed-katex display-mode=\"1\"\u003e\n\\mathcal{F}(a, b) = \\left\\{\n  \\begin{array}{lr}\n    a\\, (= \\overline{b}) \u0026amp; \\text{if}\\; a \\ne b \\\\\n    i \\xleftarrow{\\text{rnd}} \\{a, \\overline{b}\\} \u0026amp; \\text{if}\\; a = b\n  \\end{array}\n\\right.\n\u003c/embed-katex\u003e\u003c/eqn\u003e\u003c/section\u003e\u003c/math\u003e\n\u003cp\u003eここで\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea \\ne b\u003c/eq\u003e\u003c/embed-katex\u003eのケースは実は\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea = \\overline{b}\u003c/eq\u003e\u003c/embed-katex\u003eなため、\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\{a, \\overline{b}\\}\u003c/eq\u003e\u003c/embed-katex\u003eからどちらかを選んだ結果と等しくなる。そのためもはやこの場合分けは不要となり\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\mathcal{F}\u003c/eq\u003e\u003c/embed-katex\u003eは次のようになる。\u003c/p\u003e\n\u003csection class=\"zenn-katex\"\u003e\u003ceqn\u003e\u003cembed-katex display-mode=\"1\"\u003e\n\\mathcal{F}(a, b) = r \\xleftarrow{\\text{rnd}} \\{a, \\overline{b}\\}\n\u003c/embed-katex\u003e\u003c/eqn\u003e\u003c/section\u003e\u003c/math\u003e\n\u003cp\u003e元論文では、\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea, b\u003c/eq\u003e\u003c/embed-katex\u003eを秘密にしたままこのような関数\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\mathcal{F}\u003c/eq\u003e\u003c/embed-katex\u003eをカードプロトコルで構成していた。その説明が気になる人は元論文を入手してもらうとして、ここでは量子コンピュータを利用した方法を紹介する。\u003c/p\u003e\n\u003ch1 id=\"bb84%E3%83%99%E3%83%BC%E3%82%B9%E3%81%AE2%E4%BA%BA%E3%81%AB%E3%82%88%E3%82%8B%E9%87%8F%E5%AD%90covert-lottery\"\u003e\u003ca class=\"header-anchor-link\" href=\"#bb84%E3%83%99%E3%83%BC%E3%82%B9%E3%81%AE2%E4%BA%BA%E3%81%AB%E3%82%88%E3%82%8B%E9%87%8F%E5%AD%90covert-lottery\" rel=\"nofollow\"\u003e\u003c/a\u003e BB84ベースの2人による量子Covert Lottery\u003c/h1\u003e\n\u003cp\u003eそれでは実際に量子コンピュータを利用したナイーブなプロトコルについて説明する\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#fn4\" id=\"fnref4\"\u003e[4]\u003c/a\u003e\u003c/sup\u003e。今、アリスとボブの2人が先手・後手を決めたいと考えている。前節と同様に\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003eを先手、\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003eを後手として次のようなプロトコルを実行する。\u003c/p\u003e\n\u003cdiv class=\"msg alert\"\u003e\u003cp\u003e後に述べるようにこのプロトコルには脆弱性がある！\u003c/p\u003e\n\u003c/div\u003e\n\u003cp\u003eまずは簡単さを優先したプロトコルを紹介し、そのあとどのような問題があるかを見ていくことにする。\u003c/p\u003e\n\u003ch2 id=\"%E3%83%97%E3%83%AD%E3%83%88%E3%82%B3%E3%83%AB\"\u003e\u003ca class=\"header-anchor-link\" href=\"#%E3%83%97%E3%83%AD%E3%83%88%E3%82%B3%E3%83%AB\" rel=\"nofollow\"\u003e\u003c/a\u003e プロトコル\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eアリスは1bitの乱数\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ex \\xleftarrow{\\text{rnd}} \\{0, 1\\}\u003c/eq\u003e\u003c/embed-katex\u003eと、先手・後手の希望\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea \\in \\{0, 1\\}\u003c/eq\u003e\u003c/embed-katex\u003eを選択する\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eアリスは\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea, x\u003c/eq\u003e\u003c/embed-katex\u003eを用いて次の4つ量子状態から1つ\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{\\psi_{a,x}}\u003c/eq\u003e\u003c/embed-katex\u003eを選択する\u003c/p\u003e\n\u003csection class=\"zenn-katex\"\u003e\u003ceqn\u003e\u003cembed-katex display-mode=\"1\"\u003e\n    \\def\\bra#1{\\mathinner{\\left\\langle{#1}\\right|}}\n    \\def\\ket#1{\\mathinner{\\left|{#1}\\right\\rangle}}\n    \\left\\{\n      \\begin{array}{lcl}\n        \\ket{\\psi_{0,0}} \u0026amp; \\equiv \u0026amp; \\ket{0} \\\\\n        \\ket{\\psi_{0,1}} \u0026amp; \\equiv \u0026amp; \\ket{1} \\\\\n        \\ket{\\psi_{1,0}} \u0026amp; \\equiv \u0026amp; \\ket{+} \\\\\n        \\ket{\\psi_{1,1}} \u0026amp; \\equiv \u0026amp; \\ket{-}\n      \\end{array}\n    \\right.\n    \u003c/embed-katex\u003e\u003c/eqn\u003e\u003c/section\u003e\u003c/math\u003e\n\u003cul\u003e\n\u003cli\u003eただし\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{\\pm} \\equiv \\frac{1}{\\sqrt{2}}\\left(\\ket{0} \\pm \\ket{1}\\right)\u003c/eq\u003e\u003c/embed-katex\u003eとする\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eアリスはボブへ量子ビット\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{\\psi_{a,x}}\u003c/eq\u003e\u003c/embed-katex\u003eを送信する\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eボブは量子状態\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{\\psi_{a,x}}\u003c/eq\u003e\u003c/embed-katex\u003eを受信し、ボブの希望\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eb \\in \\{0, 1\\}\u003c/eq\u003e\u003c/embed-katex\u003eを選択する\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eボブは次のような基底状態\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\mathcal{B}_{\\overline{b}}\u003c/eq\u003e\u003c/embed-katex\u003eで\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{\\psi_{a,x}}\u003c/eq\u003e\u003c/embed-katex\u003eを測定し、測定結果を\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ey\u003c/eq\u003e\u003c/embed-katex\u003eとする\u003c/p\u003e\n\u003csection class=\"zenn-katex\"\u003e\u003ceqn\u003e\u003cembed-katex display-mode=\"1\"\u003e\n    \\mathcal{B}_{\\overline{b}} \\equiv \\left\\{\\ket{\\psi_{\\overline{b},0}}, \\ket{\\psi_{\\overline{b},1}}\\right\\}\n    \u003c/embed-katex\u003e\u003c/eqn\u003e\u003c/section\u003e\u003c/math\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\overline{b}\u003c/eq\u003e\u003c/embed-katex\u003eを利用することに注意する\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eボブはアリスへ\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ey\u003c/eq\u003e\u003c/embed-katex\u003eを送信する\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eアリスは\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ey\u003c/eq\u003e\u003c/embed-katex\u003eを受けとり、\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea \\oplus x \\oplus y\u003c/eq\u003e\u003c/embed-katex\u003e\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#fn5\" id=\"fnref5\"\u003e[5]\u003c/a\u003e\u003c/sup\u003eをボブへ送信しプロトコルの結果とする\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eこのプロトコルだけ見せられても実際に正しく動作しているのかよく分からないと思うので、アリスの変数\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea, x\u003c/eq\u003e\u003c/embed-katex\u003eとボブの変数\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eb\u003c/eq\u003e\u003c/embed-katex\u003eについて\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ey\u003c/eq\u003e\u003c/embed-katex\u003eや\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea \\oplus x \\oplus y\u003c/eq\u003e\u003c/embed-katex\u003eがどうなるのか？というのを次の表にまとめた。\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/th\u003e\n\u003cth\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ex\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/th\u003e\n\u003cth\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{\\psi_{a,x}}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/th\u003e\n\u003cth\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\overline{b}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/th\u003e\n\u003cth\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\mathcal{B}_{\\overline{b}}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/th\u003e\n\u003cth style=\"text-align:center\"\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ey\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/th\u003e\n\u003cth style=\"text-align:center\"\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea \\oplus x \\oplus y\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003e（後手）\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{0}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003e（先手）\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\left\\{\\ket{0}, \\ket{1}\\right\\}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd style=\"text-align:center\"\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd style=\"text-align:center\"\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003e（後手）\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{0}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e（後手）\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\left\\{\\ket{+}, \\ket{-}\\right\\}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd style=\"text-align:center\"\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003er \\xleftarrow{\\text{rnd}} \\{0, 1\\}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd style=\"text-align:center\"\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003er \\xleftarrow{\\text{rnd}} \\{0, 1\\}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003e（後手）\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{1}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003e（先手）\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\left\\{\\ket{0}, \\ket{1}\\right\\}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd style=\"text-align:center\"\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd style=\"text-align:center\"\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003e（後手）\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{1}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e（後手）\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\left\\{\\ket{+}, \\ket{-}\\right\\}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd style=\"text-align:center\"\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003er \\xleftarrow{\\text{rnd}} \\{0, 1\\}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd style=\"text-align:center\"\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003er \\xleftarrow{\\text{rnd}} \\{0, 1\\}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e（先手）\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{+}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003e（先手）\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\left\\{\\ket{0}, \\ket{1}\\right\\}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd style=\"text-align:center\"\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003er \\xleftarrow{\\text{rnd}} \\{0, 1\\}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd style=\"text-align:center\"\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003er \\xleftarrow{\\text{rnd}} \\{0, 1\\}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e（先手）\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{+}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e（後手）\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\left\\{\\ket{+}, \\ket{-}\\right\\}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd style=\"text-align:center\"\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd style=\"text-align:center\"\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e（先手）\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{-}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003e（先手）\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\left\\{\\ket{0}, \\ket{1}\\right\\}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd style=\"text-align:center\"\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003er \\xleftarrow{\\text{rnd}} \\{0, 1\\}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd style=\"text-align:center\"\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003er \\xleftarrow{\\text{rnd}} \\{0, 1\\}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e（先手）\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{-}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e（後手）\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\left\\{\\ket{+}, \\ket{-}\\right\\}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd style=\"text-align:center\"\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd style=\"text-align:center\"\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003eこのようにアリスとボブの先手・後手の希望が異なる時に限って最終的な出力\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea \\oplus x \\oplus y\u003c/eq\u003e\u003c/embed-katex\u003eがアリスの先手・後手を示すようになっている。\u003cbr\u003e\nなぜこのようになるのか？そのアイディアをまとめると\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea = \\overline{b}\\,(\\Rightarrow a \\ne b)\u003c/eq\u003e\u003c/embed-katex\u003eのときは（5）の測定結果\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ey\u003c/eq\u003e\u003c/embed-katex\u003eはアリスの乱数\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ex\u003c/eq\u003e\u003c/embed-katex\u003eと必ず一致する\n\u003cul\u003e\n\u003cli\u003e一方で\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea \\ne \\overline{b}\u003c/eq\u003e\u003c/embed-katex\u003eのときは\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ey\u003c/eq\u003e\u003c/embed-katex\u003eが乱数になるため、\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea \\oplus x \\oplus y\u003c/eq\u003e\u003c/embed-katex\u003eは最終的に乱数とXORするので乱数となりOKである\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea = \\overline{b}\u003c/eq\u003e\u003c/embed-katex\u003eなときは\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ex = y\u003c/eq\u003e\u003c/embed-katex\u003eなので、したがって\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea \\oplus x \\oplus y\u003c/eq\u003e\u003c/embed-katex\u003eのXORはキャンセルされて\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea\u003c/eq\u003e\u003c/embed-katex\u003eが計算される\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"%E5%8F%82%E5%8A%A0%E8%80%85%E3%81%AE%E6%80%A7%E8%B3%AA\"\u003e\u003ca class=\"header-anchor-link\" href=\"#%E5%8F%82%E5%8A%A0%E8%80%85%E3%81%AE%E6%80%A7%E8%B3%AA\" rel=\"nofollow\"\u003e\u003c/a\u003e 参加者の性質\u003c/h2\u003e\n\u003cp\u003eこのプロトコルでは（7）で最後にアリスの手元で行なわれる計算が最終的な結果となるため、アリスが不誠実であればここで結果を意図的に変更できる。したがってこれは少なくともアリスがセミオネスト\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#fn6\" id=\"fnref6\"\u003e[6]\u003c/a\u003e\u003c/sup\u003eであるという仮定の下でしか上手くいかない。\u003c/p\u003e\n\u003ch2 id=\"%E7%A2%BA%E7%8E%87%E7%9A%84%E3%81%AA%E6%83%85%E5%A0%B1%E3%83%AA%E3%83%BC%E3%82%AF\"\u003e\u003ca class=\"header-anchor-link\" href=\"#%E7%A2%BA%E7%8E%87%E7%9A%84%E3%81%AA%E6%83%85%E5%A0%B1%E3%83%AA%E3%83%BC%E3%82%AF\" rel=\"nofollow\"\u003e\u003c/a\u003e 確率的な情報リーク\u003c/h2\u003e\n\u003cp\u003eあらかじめ述べておいた脆弱性として、このプロトコルは確率でボブの情報（先手・後手の選択）がアリスへリークする。どういうことかを次のような具体的な例で考える。\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eアリスは\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea = 0, x = 0\u003c/eq\u003e\u003c/embed-katex\u003eを選んだため、送信するのは\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{0}\u003c/eq\u003e\u003c/embed-katex\u003eとなる\u003c/li\u003e\n\u003cli\u003eここでもしボブが\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\overline{b} = 1\\,(\\Rightarrow b = 0)\u003c/eq\u003e\u003c/embed-katex\u003eを選んだとする\u003c/li\u003e\n\u003cli\u003eこのとき\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{0}\u003c/eq\u003e\u003c/embed-katex\u003eを\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\left\\{\\ket{+}, \\ket{-}\\right\\}\u003c/eq\u003e\u003c/embed-katex\u003eで測定するため、50%ずつの確率で\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ey = 0\u003c/eq\u003e\u003c/embed-katex\u003eまたは\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ey = 1\u003c/eq\u003e\u003c/embed-katex\u003eが発生する\n\u003cul\u003e\n\u003cli\u003eここでもし\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ey = 0\u003c/eq\u003e\u003c/embed-katex\u003eとなった場合はアリスへの情報リークは\u003cstrong\u003eない\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e一方でもしここで\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ey = 1\u003c/eq\u003e\u003c/embed-katex\u003eが生じた場合、\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\left\\{\\ket{0}, \\ket{1}\\right\\}\u003c/eq\u003e\u003c/embed-katex\u003eで測定した場合には100%で\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ey = 0\u003c/eq\u003e\u003c/embed-katex\u003eなため、\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\overline{b} = 1\u003c/eq\u003e\u003c/embed-katex\u003eであることがリークする\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eしたがって、このプロトコルは最終的な結果は\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\mathcal{F}\u003c/eq\u003e\u003c/embed-katex\u003eとして問題ないが、アリスは確率的にボブの希望\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eb\u003c/eq\u003e\u003c/embed-katex\u003eを知ることができてしまい問題がある。\u003c/p\u003e\n\u003ch1 id=\"cz%E3%82%B2%E3%83%BC%E3%83%88%E3%81%A81%E9%87%8F%E5%AD%90%E3%83%93%E3%83%83%E3%83%88%E3%81%AE%E6%B8%AC%E5%AE%9A%E5%9E%8B%E9%87%8F%E5%AD%90%E8%A8%88%E7%AE%97\"\u003e\u003ca class=\"header-anchor-link\" href=\"#cz%E3%82%B2%E3%83%BC%E3%83%88%E3%81%A81%E9%87%8F%E5%AD%90%E3%83%93%E3%83%83%E3%83%88%E3%81%AE%E6%B8%AC%E5%AE%9A%E5%9E%8B%E9%87%8F%E5%AD%90%E8%A8%88%E7%AE%97\" rel=\"nofollow\"\u003e\u003c/a\u003e CZゲートと1量子ビットの測定型量子計算\u003c/h1\u003e\n\u003cp\u003e先にプロトコルで利用する\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eCZ\u003c/eq\u003e\u003c/embed-katex\u003eゲートと、Z軸に回転させた基底による測定について説明する。\u003c/p\u003e\n\u003ch2 id=\"cz%E3%82%B2%E3%83%BC%E3%83%88\"\u003e\u003ca class=\"header-anchor-link\" href=\"#cz%E3%82%B2%E3%83%BC%E3%83%88\" rel=\"nofollow\"\u003e\u003c/a\u003e CZゲート\u003c/h2\u003e\n\u003csection class=\"zenn-katex\"\u003e\u003ceqn\u003e\u003cembed-katex display-mode=\"1\"\u003e\nCZ \\equiv \\ket{0}\\bra{0}\\otimes I + \\ket{1}\\bra{1}\\otimes Z\n\u003c/embed-katex\u003e\u003c/eqn\u003e\u003c/section\u003e\u003c/math\u003e\n\u003cp\u003eただし\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eI\u003c/eq\u003e\u003c/embed-katex\u003eと\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eZ\u003c/eq\u003e\u003c/embed-katex\u003eは次のような量子ゲートになる\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#fn7\" id=\"fnref7\"\u003e[7]\u003c/a\u003e\u003c/sup\u003e。\u003c/p\u003e\n\u003csection class=\"zenn-katex\"\u003e\u003ceqn\u003e\u003cembed-katex display-mode=\"1\"\u003e\nI \\equiv \\left(\\begin{array}{cc}\n  1 \u0026amp; 0 \\\\\n  0 \u0026amp; 1\n\\end{array}\\right), \\;\nZ \\equiv \\left(\\begin{array}{cc}\n  1 \u0026amp; 0 \\\\\n  0 \u0026amp; -1 \n\\end{array}\\right)\n\u003c/embed-katex\u003e\u003c/eqn\u003e\u003c/section\u003e\u003c/math\u003e\n\u003cp\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eCZ\u003c/eq\u003e\u003c/embed-katex\u003eゲートは2量子ビットへの量子ゲートであり、次のような動作になる\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#fn8\" id=\"fnref8\"\u003e[8]\u003c/a\u003e\u003c/sup\u003e。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e1番目の量子ビットの状態が\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{0}\u003c/eq\u003e\u003c/embed-katex\u003eであれば、2番目の量子ビットに何もしない\u003c/li\u003e\n\u003cli\u003e1番目の量子ビットの状態が\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{1}\u003c/eq\u003e\u003c/embed-katex\u003eであれば、2番目に\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eZ\u003c/eq\u003e\u003c/embed-katex\u003e量子ゲートを作用させる\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e今、例として\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{\\chi} := a\\ket{0} + b\\ket{1}\u003c/eq\u003e\u003c/embed-katex\u003eと\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{+}\u003c/eq\u003e\u003c/embed-katex\u003eを\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eCZ\u003c/eq\u003e\u003c/embed-katex\u003eゲートで結合したとすると、次のようになる。\u003c/p\u003e\n\u003csection class=\"zenn-katex\"\u003e\u003ceqn\u003e\u003cembed-katex display-mode=\"1\"\u003e\n\\begin{array}{lcl}\n  CZ\\ket{\\chi}_1\\ket{+}_2 \u0026amp; = \u0026amp; \\ket{0}\\mathinner{\\left\\langle{0}|\\chi\\right\\rangle}_1 I\\ket{+}_2 + \\ket{1}\\mathinner{\\left\\langle{1}|\\chi\\right\\rangle}_1 Z\\ket{+}_2 \\\\\n  \u0026amp; = \u0026amp; \\ket{0}\\mathinner{\\left\\langle{0}|\\chi\\right\\rangle}_1 \\ket{+}_2 + \\ket{1}\\mathinner{\\left\\langle{1}|\\chi\\right\\rangle}_1 \\ket{-}_2 \\\\\n  \u0026amp; = \u0026amp; a\\ket{0}_1\\ket{+}_2 + b\\ket{1}_1\\ket{-}_2\n\\end{array}\n\u003c/embed-katex\u003e\u003c/eqn\u003e\u003c/section\u003e\u003c/math\u003e\n\u003cp\u003eここで、各量子ビットについている\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1,2\u003c/eq\u003e\u003c/embed-katex\u003eの添字はそれぞれ1番目の量子ビット、2番目の量子ビットを意味する。\u003c/p\u003e\n\u003ch2 id=\"1%E9%87%8F%E5%AD%90%E3%83%93%E3%83%83%E3%83%88%E3%81%AE%E6%B8%AC%E5%AE%9A%E5%9E%8B%E9%87%8F%E5%AD%90%E8%A8%88%E7%AE%97\"\u003e\u003ca class=\"header-anchor-link\" href=\"#1%E9%87%8F%E5%AD%90%E3%83%93%E3%83%83%E3%83%88%E3%81%AE%E6%B8%AC%E5%AE%9A%E5%9E%8B%E9%87%8F%E5%AD%90%E8%A8%88%E7%AE%97\" rel=\"nofollow\"\u003e\u003c/a\u003e 1量子ビットの測定型量子計算\u003c/h2\u003e\n\u003cp\u003eさらに、この\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eCZ\u003c/eq\u003e\u003c/embed-katex\u003eゲートを適用した\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eCZ\\ket{\\chi}_1\\ket{+}_2\u003c/eq\u003e\u003c/embed-katex\u003eの射影測定について考える。普通の測定では\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\left\\{\\ket{0}, \\ket{1}\\right\\}\u003c/eq\u003e\u003c/embed-katex\u003eを利用するが、ここでは適当な角度\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\phi\u003c/eq\u003e\u003c/embed-katex\u003eを用いた\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\left\\{\\ket{0} \\pm e^{i\\phi}\\ket{1}\\right\\}\u003c/eq\u003e\u003c/embed-katex\u003eを利用する。\u003cbr\u003e\n今1量子ビット目にある\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{\\chi}_1\u003c/eq\u003e\u003c/embed-katex\u003eを測定し、\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{0} + e^{i\\phi}\\ket{1}\u003c/eq\u003e\u003c/embed-katex\u003e得られたとすると、2番目の量子ビットは次のようになる。\u003c/p\u003e\n\u003csection class=\"zenn-katex\"\u003e\u003ceqn\u003e\u003cembed-katex display-mode=\"1\"\u003e\n\\begin{array}{ll}\n  \u0026amp; (\\ket{0}_1 + e^{i\\phi}\\ket{1}_1)(\\bra{0}_1 + e^{i\\phi}\\bra{1}_1) \\cdot (a\\ket{0}_1\\ket{+}_2 + b\\ket{1}_1\\ket{-}_2) \\\\\n  = \u0026amp; (\\ket{0}_1 + e^{i\\phi}\\ket{1}_1)(a\\ket{+}_2 + be^{i\\phi}\\ket{-}_2)\n\\end{array}\n\u003c/embed-katex\u003e\u003c/eqn\u003e\u003c/section\u003e\u003c/math\u003e\n\u003cp\u003eこの\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea\\ket{+}_2 + be^{i\\phi}\\ket{-}_2\u003c/eq\u003e\u003c/embed-katex\u003eはさらに次のように変形できる。\u003c/p\u003e\n\u003csection class=\"zenn-katex\"\u003e\u003ceqn\u003e\u003cembed-katex display-mode=\"1\"\u003e\n\\begin{array}{lcl}\n  a\\ket{+}_2 + be^{i\\phi}\\ket{-}_2 \u0026amp; = \u0026amp; \\frac{1}{\\sqrt{2}}\\left(a\\ket{0} + a\\ket{1} + be^{i\\phi}\\ket{0} - be^{i\\phi}\\ket{1}\\right) \\\\\n  \u0026amp; = \u0026amp; \\frac{1}{\\sqrt{2}}\\left((a + be^{i\\phi})\\ket{0} + (a - be^{i\\phi})\\ket{1}\\right)\n\\end{array}\n\u003c/embed-katex\u003e\u003c/eqn\u003e\u003c/section\u003e\u003c/math\u003e\n\u003cp\u003eこれはアダマールゲート\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eH\u003c/eq\u003e\u003c/embed-katex\u003eと位相ゲート\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eR_Z\u003c/eq\u003e\u003c/embed-katex\u003e\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#fn9\" id=\"fnref9\"\u003e[9]\u003c/a\u003e\u003c/sup\u003eを利用して最終的に次のようになる。\u003c/p\u003e\n\u003csection class=\"zenn-katex\"\u003e\u003ceqn\u003e\u003cembed-katex display-mode=\"1\"\u003e\n\\begin{array}{lcl}\n  \\frac{1}{\\sqrt{2}}\\left((a + be^{i\\phi})\\ket{0} + (a - be^{i\\phi})\\ket{1}\\right) \u0026amp; = \u0026amp; HR_Z(\\phi)\\ket{\\chi} \\\\\n\\end{array}\n\u003c/embed-katex\u003e\u003c/eqn\u003e\u003c/section\u003e\u003c/math\u003e\n\u003cp\u003eもし射影測定で直交する\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{0} - e^{i\\phi}\\ket{1}\u003c/eq\u003e\u003c/embed-katex\u003eが観測された場合は量子的なNOTである\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eX\u003c/eq\u003e\u003c/embed-katex\u003eゲートによって次のように表現できる。\u003c/p\u003e\n\u003csection class=\"zenn-katex\"\u003e\u003ceqn\u003e\u003cembed-katex display-mode=\"1\"\u003e\nXHR_Z(\\phi)\\ket{\\chi}\n\u003c/embed-katex\u003e\u003c/eqn\u003e\u003c/section\u003e\u003c/math\u003e\n\u003cp\u003eなおアダマールゲート\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eH\u003c/eq\u003e\u003c/embed-katex\u003e、位相ゲート\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eR_Z\u003c/eq\u003e\u003c/embed-katex\u003eそして\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eX\u003c/eq\u003e\u003c/embed-katex\u003eはそれぞれ次のようになる。\u003c/p\u003e\n\u003csection class=\"zenn-katex\"\u003e\u003ceqn\u003e\u003cembed-katex display-mode=\"1\"\u003e\nH \\equiv \\frac{1}{\\sqrt{2}}\\left(\\begin{array}{cc}\n  1 \u0026amp; 1 \\\\\n  1 \u0026amp; -1\n\\end{array}\\right), \\;\nR_Z(x) \\equiv \\left(\\begin{array}{cc}\n  1 \u0026amp; 0 \\\\\n  0 \u0026amp; e^{ix}\n\\end{array}\\right), \\;\nX \\equiv \\left(\\begin{array}{cc}\n  0 \u0026amp; 1 \\\\\n  1 \u0026amp; 0\n\\end{array}\\right)\n\u003c/embed-katex\u003e\u003c/eqn\u003e\u003c/section\u003e\u003c/math\u003e\n\u003cp\u003eこの一連の操作で生じたことというのは、1番目の量子ビット\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{\\chi}\u003c/eq\u003e\u003c/embed-katex\u003eが\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eCZ\u003c/eq\u003e\u003c/embed-katex\u003eゲートで連結された2番目の量子ビット\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{+}\u003c/eq\u003e\u003c/embed-katex\u003eへ移動（テレポート）し、かつ角度\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\phi\u003c/eq\u003e\u003c/embed-katex\u003eを埋め込んだ基底を測定に利用することで、\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{\\chi}\u003c/eq\u003e\u003c/embed-katex\u003eにアダマールゲートと位相ゲートを作用させた状態となった。場合によっては\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eX\u003c/eq\u003e\u003c/embed-katex\u003eゲートが入ってしまうが、それは1番目の量子ビットを測定した観測結果によって\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eX\u003c/eq\u003e\u003c/embed-katex\u003eゲートが生じたかどうか？が明らかなので問題はない。\u003c/p\u003e\n\u003ch1 id=\"2%E4%BA%BA%E3%81%AE%E3%83%96%E3%83%A9%E3%82%A4%E3%83%B3%E3%83%89%E9%87%8F%E5%AD%90covert-lottery\"\u003e\u003ca class=\"header-anchor-link\" href=\"#2%E4%BA%BA%E3%81%AE%E3%83%96%E3%83%A9%E3%82%A4%E3%83%B3%E3%83%89%E9%87%8F%E5%AD%90covert-lottery\" rel=\"nofollow\"\u003e\u003c/a\u003e 2人のブラインド量子Covert Lottery\u003c/h1\u003e\n\u003cp\u003eここからはやや複雑な方法に挑戦する。先にアイディアを述べると、これはブラインド量子計算\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#fn10\" id=\"fnref10\"\u003e[10]\u003c/a\u003e\u003c/sup\u003eのような方法で、前節では古典的に行なっていたXORのような操作を量子2量子ビットのもつれで行うようなイメージである。\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eアリスはランダムな角度\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\theta \\xleftarrow{\\text{rnd}} \\left\\{0, \\frac{1\\pi}{4}, \\dots, \\frac{7\\pi}{4}\\right\\}\u003c/eq\u003e\u003c/embed-katex\u003eを選ぶ\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eアリスは次のような1量子ビット\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{+_\\theta}\u003c/eq\u003e\u003c/embed-katex\u003eを作成しボブへ送信する\u003c/p\u003e\n\u003csection class=\"zenn-katex\"\u003e\u003ceqn\u003e\u003cembed-katex display-mode=\"1\"\u003e\n    \\ket{+_\\theta} \\equiv \\frac{1}{\\sqrt{2}}\\left(\\ket{0} + e^{-i\\theta}\\ket{1}\\right)\n    \u003c/embed-katex\u003e\u003c/eqn\u003e\u003c/section\u003e\u003c/math\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eボブはアリスから受けとった\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{+_\\theta}\u003c/eq\u003e\u003c/embed-katex\u003eと\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{+}\u003c/eq\u003e\u003c/embed-katex\u003eを次のような\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eCZ\u003c/eq\u003e\u003c/embed-katex\u003eゲートで結合する\u003c/p\u003e\n\u003csection class=\"zenn-katex\"\u003e\u003ceqn\u003e\u003cembed-katex display-mode=\"1\"\u003e\n    CZ\\ket{+_\\theta}_1\\ket{+}_2\n    \u003c/embed-katex\u003e\u003c/eqn\u003e\u003c/section\u003e\u003c/math\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eCZ\\ket{+_\\theta}_1\\ket{+}_2\u003c/eq\u003e\u003c/embed-katex\u003eは次のように整理できる\u003c/p\u003e\n\u003csection class=\"zenn-katex\"\u003e\u003ceqn\u003e\u003cembed-katex display-mode=\"1\"\u003e\n        CZ\\ket{+_\\theta}_1\\ket{+}_2 = \\frac{1}{\\sqrt{2}}\\ket{0}_1\\ket{+}_2 + \\frac{e^{-i\\theta}}{\\sqrt{2}}\\ket{1}_1\\ket{-}_2\n        \u003c/embed-katex\u003e\u003c/eqn\u003e\u003c/section\u003e\u003c/math\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eアリスは希望\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea \\in {0, 1}\u003c/eq\u003e\u003c/embed-katex\u003eと乱数\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ex \\xleftarrow{\\text{rnd}} \\{0, 1\\}\u003c/eq\u003e\u003c/embed-katex\u003eを選び、それに基づいて次のような角度\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\delta\u003c/eq\u003e\u003c/embed-katex\u003eを選びボブへ送信する\u003c/p\u003e\n\u003csection class=\"zenn-katex\"\u003e\u003ceqn\u003e\u003cembed-katex display-mode=\"1\"\u003e\n    \\delta := \\left\\{\n      \\begin{array}{ll}\n        \\theta + x\\pi\u0026amp; \\text{if}\\; a = 0 \\\\\n        \\theta + \\frac{\\pi}{2} + x\\pi \u0026amp; \\text{if}\\; a = 1\n      \\end{array}\n    \\right.\n    \u003c/embed-katex\u003e\u003c/eqn\u003e\u003c/section\u003e\u003c/math\u003e\n\u003cp\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eボブは受けとった\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\delta\u003c/eq\u003e\u003c/embed-katex\u003eから次のような基底\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\left\\{\\ket{0} \\pm e^{i\\delta}\\ket{1}\\right\\}\u003c/eq\u003e\u003c/embed-katex\u003eを用意して1番目の量子ビットを測定し、その結果を\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ey \\in \\{0, 1\\}\u003c/eq\u003e\u003c/embed-katex\u003eとする\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eボブは希望\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eb \\in \\{0, 1\\}\u003c/eq\u003e\u003c/embed-katex\u003eを選び、それによって次から基底\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\mathcal{B}_{\\overline{b}}\u003c/eq\u003e\u003c/embed-katex\u003eを作成する\u003c/p\u003e\n\u003csection class=\"zenn-katex\"\u003e\u003ceqn\u003e\u003cembed-katex display-mode=\"1\"\u003e\n    \\left\\{\n      \\begin{array}{lcl}\n        \\mathcal{B}_{0} \u0026amp; \\equiv \u0026amp; \\left\\{\\ket{\\pm}\\right\\} \\\\\n        \\mathcal{B}_{1} \u0026amp; \\equiv \u0026amp; \\left\\{\\frac{1}{\\sqrt{2}}\\left(\\ket{0} \\pm i\\ket{1}\\right)\\right\\}\n      \\end{array}\n    \\right.\n    \u003c/embed-katex\u003e\u003c/eqn\u003e\u003c/section\u003e\u003c/math\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eボブは2番目の量子ビットを\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\mathcal{B}_{\\overline{b}}\u003c/eq\u003e\u003c/embed-katex\u003eで測定して結果を\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ez\u003c/eq\u003e\u003c/embed-katex\u003eとする\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eボブは\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003et := y \\oplus z\u003c/eq\u003e\u003c/embed-katex\u003eをアリスへ送信する\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eアリスはプロトコルの出力として\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea \\oplus x \\oplus t\u003c/eq\u003e\u003c/embed-katex\u003eを得る\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"%E8%A7%A3%E8%AA%AC\"\u003e\u003ca class=\"header-anchor-link\" href=\"#%E8%A7%A3%E8%AA%AC\" rel=\"nofollow\"\u003e\u003c/a\u003e 解説\u003c/h2\u003e\n\u003cp\u003e手順（5）の測定がややこしい。\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eCZ\u003c/eq\u003e\u003c/embed-katex\u003eゲートの節を参考にすると、1番目の量子ビットを基底\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\left\\{\\ket{0} \\pm e^{i\\delta}\\ket{1}\\right\\}\u003c/eq\u003e\u003c/embed-katex\u003eで測定した後の2番目の量子ビットは次のようになる。\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ey = 0\u003c/eq\u003e\u003c/embed-katex\u003eのとき\u003c/p\u003e\n\u003csection class=\"zenn-katex\"\u003e\u003ceqn\u003e\u003cembed-katex display-mode=\"1\"\u003e\n    \\begin{array}{lcl}\n      HR_Z(\\delta)\\ket{+_\\theta} \u0026amp; = \u0026amp; H\\left(\\ket{0} + e^{-i\\theta}\\cdot e^{i\\delta}\\ket{1}\\right) \\\\\n      \u0026amp; = \u0026amp; H\\left(\\ket{0} + e^{i(\\delta - \\theta)}\\ket{1}\\right)\n    \\end{array}\n    \u003c/embed-katex\u003e\u003c/eqn\u003e\u003c/section\u003e\u003c/math\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ey = 1\u003c/eq\u003e\u003c/embed-katex\u003eのとき\u003c/p\u003e\n\u003csection class=\"zenn-katex\"\u003e\u003ceqn\u003e\u003cembed-katex display-mode=\"1\"\u003e\n    XHR_Z(\\delta)\\ket{+_\\theta} = XH\\left(\\ket{0} + e^{i(\\delta - \\theta)}\\ket{1}\\right)\n    \u003c/embed-katex\u003e\u003c/eqn\u003e\u003c/section\u003e\u003c/math\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eしたがって\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\delta - \\theta\u003c/eq\u003e\u003c/embed-katex\u003eの結果によって2番目の量子ビットがどのようになるかが決定される。ここでアリスの選択に応じて2番目の量子ビットがどのように変化するのかを次の表にまとめた。\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/th\u003e\n\u003cth\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ex\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/th\u003e\n\u003cth style=\"text-align:center\"\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\delta\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/th\u003e\n\u003cth\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ey\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/th\u003e\n\u003cth\u003e2番目の量子ビット\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003e（後手）\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd style=\"text-align:center\"\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\theta\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eH\\ket{0} = \\ket{+}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003e（後手）\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd style=\"text-align:center\"\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\theta\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eXH\\ket{0} = \\ket{-}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003e（後手）\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd style=\"text-align:center\"\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\theta + \\pi\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eH\\ket{1} = \\ket{-}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003e（後手）\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd style=\"text-align:center\"\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\theta + \\pi\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eXH\\ket{1} = \\ket{+}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e（後手）\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd style=\"text-align:center\"\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\theta + \\frac{\\pi}{2}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eH(\\ket{0} + i\\ket{1}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e（後手）\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd style=\"text-align:center\"\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\theta + \\frac{\\pi}{2}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eXH(\\ket{0} + i\\ket{1}\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e（後手）\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd style=\"text-align:center\"\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\theta + \\frac{\\pi}{2} + \\pi\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eH(\\ket{0} - i\\ket{1})\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e（後手）\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd style=\"text-align:center\"\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\theta + \\frac{\\pi}{2} + \\pi\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eXH(\\ket{0} - i\\ket{1})\u003c/eq\u003e\u003c/embed-katex\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003eここでアリスが後手を選んだ状態はよく知られた状態\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{+}, \\ket{-}\u003c/eq\u003e\u003c/embed-katex\u003eとなっているが、一方で残った2つはどういう状態かが問題となる。この状態は\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\delta\u003c/eq\u003e\u003c/embed-katex\u003eに\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\frac{\\pi}{2} = 90^\\circ\u003c/eq\u003e\u003c/embed-katex\u003eが加算されているため、\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{+}, \\ket{-}\u003c/eq\u003e\u003c/embed-katex\u003eから丁度\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\frac{\\pi}{2}\u003c/eq\u003e\u003c/embed-katex\u003eずらしたところである。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://storage.googleapis.com/zenn-user-upload/d9749ef2c77a473f65570e34.png\" alt=\"\" width=\"400\"\u003e\u003cbr\u003e\n\u003cem\u003eブロッホ球のZ軸から見た時の位置関係\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eこのあとボブは手順（6）で基底\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\mathcal{B}_{\\overline{b}}\u003c/eq\u003e\u003c/embed-katex\u003eを選ぶが、\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eH(\\ket{0} \\pm i\\ket{1}) = \\frac{1}{\\sqrt{2}}\\left(\\ket{0} \\pm i\\ket{1}\\right)\u003c/eq\u003e\u003c/embed-katex\u003eなのでボブの希望\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eb\u003c/eq\u003e\u003c/embed-katex\u003eによって上図の実線にあたる\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\{\\ket{\\pm}\\}\u003c/eq\u003e\u003c/embed-katex\u003eが基底となるか、それとも破線にあたる\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\{ \\frac{1}{\\sqrt{2}}\\left(\\ket{0} \\pm i\\ket{1}\\right)\\}\u003c/eq\u003e\u003c/embed-katex\u003eが基底となるかが決定する。アリスとボブの選択が等しいとき（\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea = b\u003c/eq\u003e\u003c/embed-katex\u003e）は2番目の量子ビットがと基底が\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\frac{\\pi}{2}\u003c/eq\u003e\u003c/embed-katex\u003eずれているため結果はランダムになり、そうでないときは\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ey \\oplus z = x\u003c/eq\u003e\u003c/embed-katex\u003eとなる。\u003cbr\u003e\nそして手順（9）の最終的な結果は、1番目と2番目の量子ビット測定結果のXORである\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ey \\oplus z\u003c/eq\u003e\u003c/embed-katex\u003eは\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea \\ne b\u003c/eq\u003e\u003c/embed-katex\u003eの場合は常に\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ex\u003c/eq\u003e\u003c/embed-katex\u003eと等しくなる。したがってこのときに限っては確実に\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003ea \\oplus x \\oplus t = a\u003c/eq\u003e\u003c/embed-katex\u003eとなり、\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\mathcal{F}\u003c/eq\u003e\u003c/embed-katex\u003eの出力として妥当となる。\u003c/p\u003e\n\u003ch1 id=\"covert-lottery%E3%81%A8%E3%82%AC%E3%83%81%E3%83%A3\"\u003e\u003ca class=\"header-anchor-link\" href=\"#covert-lottery%E3%81%A8%E3%82%AC%E3%83%81%E3%83%A3\" rel=\"nofollow\"\u003e\u003c/a\u003e Covert Lotteryとガチャ\u003c/h1\u003e\n\u003cp\u003e元論文でもCovert Lotteryと呼ばれているように、これは先手・後手の決定とは別にくじに使うことができる。元論文ではこの2人のCovert Lotteryを任意の多人数へ拡張して次のような説明をしている。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003en\u003c/eq\u003e\u003c/embed-katex\u003e人の\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eP_1, \\dots P_n\u003c/eq\u003e\u003c/embed-katex\u003e参加者が\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003em\u003c/eq\u003e\u003c/embed-katex\u003e個の景品\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eI_1, \\dots, I_m\u003c/eq\u003e\u003c/embed-katex\u003eのうちいくつか（0個もOK）が欲しいと考えている\u003c/li\u003e\n\u003cli\u003e景品\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eI_i\u003c/eq\u003e\u003c/embed-katex\u003eについて、プレイヤーは\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003eまたは\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003eを投票する\u003c/li\u003e\n\u003cli\u003eこのとき\n\u003col\u003e\n\u003cli\u003eもし1人のプレイヤー\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eP_j\u003c/eq\u003e\u003c/embed-katex\u003eのみが\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003eを投票し、それ以外の全プレイヤーが\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e0\u003c/eq\u003e\u003c/embed-katex\u003eを投票していれば\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eP_j\u003c/eq\u003e\u003c/embed-katex\u003eが景品\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eI_i\u003c/eq\u003e\u003c/embed-katex\u003eを入手する\u003c/li\u003e\n\u003cli\u003e一方で複数のプレイヤーが\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e1\u003c/eq\u003e\u003c/embed-katex\u003eを投票した場合は、そのプレイヤーの中からランダムに1人を決定する\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eつまり、2人のCovert Lotteryも上記のように考えると、2人のプレイヤーにおいて次のようになる。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eどちらか1人のみ景品が欲しい場合はそちらに景品が当選する\u003c/li\u003e\n\u003cli\u003e2人ともが景品が欲しい・欲くない場合はランダムに当選者が選択される\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eつまり複数のプレイヤー間で、プレイヤーの希望を隠蔽したまま景品をなるべく希望に沿う形で当選させることができる。たとえば欲しくない景品が当選したので転売するといったことはあるだろうと思うので、そういったことをなるべく少なくできるかもしれない。\u003c/p\u003e\n\u003ch1 id=\"%E3%81%BE%E3%81%A8%E3%82%81\"\u003e\u003ca class=\"header-anchor-link\" href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" rel=\"nofollow\"\u003e\u003c/a\u003e まとめ\u003c/h1\u003e\n\u003cp\u003eアリスがセミオネストであるという仮定をなんとか取り除けないか多少は考えたものの、すぐには思いつかなかったのでいったんこのままで公開することにした。もしよい方法を思いついたという方がいれば教えてほしい。\u003cbr\u003e\nまた元論文では今回紹介した2人のプロトコルを任意の人数へ拡張していたため、そちらも量子プロトコルで達成できないか？というのを考えてみたい。\u003c/p\u003e\n\u003csection class=\"footnotes\"\u003e\n\u003cdiv class=\"footnotes-title\"\u003e\u003cimg src=\"https://twemoji.maxcdn.com/2/svg/1f58b.svg\" class=\"emoji footnotes-twemoji\" loading=\"lazy\" width=\"20\" height=\"20\"\u003e脚注\u003c/div\u003e\n\u003col class=\"footnotes-list\"\u003e\n\u003cli id=\"fn1\" class=\"footnote-item\"\u003e\u003cp\u003eこの論文のことを今後は「元論文」という呼ぶことにする。 \u003ca href=\"#fnref1\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli id=\"fn2\" class=\"footnote-item\"\u003e\u003cp\u003eこの文書を読むうえではカードベース暗号の知識は必要ないが、これはこれで非常におもしろいので、たとえば\u003ca href=\"https://doi.org/10.1587/essfr.9.3_179\" rel=\"nofollow\"\u003eカード組を用いた秘密計算\u003c/a\u003eといった文献を読むとよい。 \u003ca href=\"#fnref2\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli id=\"fn3\" class=\"footnote-item\"\u003e\u003cp\u003e元論文では矢印の上に\u003ccode\u003e$\u003c/code\u003e（LaTeX表記では\u003ccode\u003e\\xleftarrow{\\text{$}}\u003c/code\u003e）の記号を利用してランダムを表現しているが、Zennのパーザーの都合（？）でこの表記が数式として認められなかったため表記を変更した。 \u003ca href=\"#fnref3\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli id=\"fn4\" class=\"footnote-item\"\u003e\u003cp\u003eこの記事では量子コンピュータの基本的な演算の知識を前提としている。このあたりは拙著の\u003ca href=\"https://qiita.com/yyu/items/efcf471ce9b97e885957#%E5%8F%A4%E5%85%B8%E8%A8%88%E7%AE%97%E6%A9%9F%E3%81%A8%E9%87%8F%E5%AD%90%E3%82%B3%E3%83%B3%E3%83%94%E3%83%A5%E3%83%BC%E3%82%BF\" rel=\"nofollow\"\u003e量子コンピュータを利用した公平なガチャ#古典計算機と量子コンピュータ\u003c/a\u003eなどを参考にしてほしい。 \u003ca href=\"#fnref4\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli id=\"fn5\" class=\"footnote-item\"\u003e\u003cp\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\oplus\u003c/eq\u003e\u003c/embed-katex\u003eはXOR演算を表す。 \u003ca href=\"#fnref5\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli id=\"fn6\" class=\"footnote-item\"\u003e\u003cp\u003eプレイヤーが「セミオネスト（\u003cem\u003esemi-honest\u003c/em\u003e）」であるとき、このプレイヤーはプロトコルの指示には違反しないが、プロトコルの指示に従う限りで（できるなら）他プレイヤーの情報を奪うといった不誠実な振る舞いをする。 \u003ca href=\"#fnref6\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli id=\"fn7\" class=\"footnote-item\"\u003e\u003cp\u003e記号\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\otimes\u003c/eq\u003e\u003c/embed-katex\u003eはテンソル積を表す。 \u003ca href=\"#fnref7\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli id=\"fn8\" class=\"footnote-item\"\u003e\u003cp\u003e\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eCZ\u003c/eq\u003e\u003c/embed-katex\u003eゲートは1番目・2番目の量子ビットを入れかえても量子的な効果に違いはない。これは数式で言うと\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003e\\ket{0}\\bra{0}\\otimes I + \\ket{1}\\bra{1}\\otimes Z = I \\otimes \\ket{0}\\bra{0} + Z \\otimes \\ket{1}\\bra{1}\u003c/eq\u003e\u003c/embed-katex\u003eとなることを意味する。したがって実際にはこの説明で1番目や2番目などと区別する必要性はないが、順番を明瞭にしないまま説明するのも不要な混乱を与えると考えてここでは順番を明示した。 \u003ca href=\"#fnref8\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli id=\"fn9\" class=\"footnote-item\"\u003e\u003cp\u003eこの位相ゲートは\u003ca href=\"https://ja.wikipedia.org/wiki/%E3%83%96%E3%83%AD%E3%83%83%E3%83%9B%E7%90%83\" rel=\"nofollow\"\u003eブロッホ球\u003c/a\u003eにおける\u003cembed-katex\u003e\u003ceq class=\"zenn-katex\"\u003eZ\u003c/eq\u003e\u003c/embed-katex\u003e軸回転を表すためこのような表記とした。 \u003ca href=\"#fnref9\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli id=\"fn10\" class=\"footnote-item\"\u003e\u003cp\u003eブラインド量子計算はセキュアクラウド量子計算とも呼ばれ、実際の計算内容や入力を秘密にしたまま量子計算を代行してもらう技術である。ブラインド量子計算について得に知らなくてもこの文書は読めるように書いたつもりだが、詳細が気になる方は\u003ca href=\"https://www.amazon.co.jp/dp/4339028703\" rel=\"nofollow\"\u003e観測に基づく量子計算\u003c/a\u003eといった本がおすすめできる。 \u003ca href=\"#fnref10\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/section\u003e\n","title":"量子コンピュータで2人の“Covert”⁉️ガチャ","emoji":"🙈","type":"tech","topics":["量子コンピュータ","暗号","セキュリティ"],"published":true},"allContentsNavCollections":[{"name":"articles","items":[{"name":"🏹 \u003cspan class=\"draft\"\u003e下書き\u003c/span\u003eSwift Bow Archの入門","href":"/articles/[slug]","as":"/articles/268447da9fb103"},{"name":"📄 Zennの記事をGitHub Pagesで無理やり表示する","href":"/articles/[slug]","as":"/articles/54134d8df9f9b5385fc3"},{"name":"🙈 量子コンピュータで2人の“Covert”⁉️ガチャ","href":"/articles/[slug]","as":"/articles/79c6c48226166aa0e875"},{"name":"📈 Scala + Play on HerokuなWebアプリにNew Relicを導入","href":"/articles/[slug]","as":"/articles/scala-play-new-relic"}]},{"name":"books","items":[{"name":"✨ 最初の本を作成しましょう","href":"/"}]}]},"__N_SSP":true},"page":"/articles/[slug]","query":{"slug":"79c6c48226166aa0e875"},"buildId":"uVa7KTqGK7QlXpqAQhlyH","isFallback":false,"gssp":true,"customServer":true}</script><script nomodule="" src="../_next/static/chunks/polyfills-bc93924a219b603c3b70.js"></script><script src="../_next/static/chunks/main-1b66b3d4e760501de7fc.js" async=""></script><script src="../_next/static/chunks/webpack-c645516b0e3a28df7079.js" async=""></script><script src="../_next/static/chunks/framework.c81d3c1a1154ef2f0a4c.js" async=""></script><script src="../_next/static/chunks/commons.1d17d07e0ebe7c16f5b5.js" async=""></script><script src="../_next/static/chunks/pages/_app-1a997dad60d5b227663b.js" async=""></script><script src="../_next/static/chunks/7ea9eb72fe501167df0c2d045178d60d280aa121.549ac0d8bdc0604fb58b.js" async=""></script><script src="../_next/static/chunks/fac796102cd92fcc9d69418a1184140a0c3193c8.fee5f3964bb5b2c71f69.js" async=""></script><script src="../_next/static/chunks/pages/articles/[slug]-ed1dc9d6a24fac085414.js" async=""></script><script src="../_next/static/uVa7KTqGK7QlXpqAQhlyH/_buildManifest.js" async=""></script><script src="../_next/static/uVa7KTqGK7QlXpqAQhlyH/_ssgManifest.js" async=""></script></body></html>